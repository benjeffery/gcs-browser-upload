(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.upload=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=_dereq_("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=_dereq_("babel-runtime/helpers/createClass");var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var STORAGE_KEY="__gcsBrowserUpload";var FileMeta=function(){function FileMeta(id,fileSize,chunkSize,storage){(0,_classCallCheck3.default)(this,FileMeta);this.id=id;this.fileSize=fileSize;this.chunkSize=chunkSize;this.storage=storage}(0,_createClass3.default)(FileMeta,[{key:"getMeta",value:function getMeta(){var meta=this.storage.getItem(STORAGE_KEY+"."+this.id);if(meta){return JSON.parse(meta)}else{return{checksums:[],chunkSize:this.chunkSize,started:false,fileSize:this.fileSize}}}},{key:"setMeta",value:function setMeta(meta){var key=STORAGE_KEY+"."+this.id;if(meta){this.storage.setItem(key,JSON.stringify(meta))}else{this.storage.removeItem(key)}}},{key:"isResumable",value:function isResumable(){var meta=this.getMeta();return meta.started&&this.chunkSize===meta.chunkSize}},{key:"getResumeIndex",value:function getResumeIndex(){return this.getMeta().checksums.length}},{key:"getFileSize",value:function getFileSize(){return this.getMeta().fileSize}},{key:"addChecksum",value:function addChecksum(index,checksum){var meta=this.getMeta();meta.checksums[index]=checksum;meta.started=true;this.setMeta(meta)}},{key:"getChecksum",value:function getChecksum(index){return this.getMeta().checksums[index]}},{key:"reset",value:function reset(){this.setMeta(null)}}]);return FileMeta}();exports.default=FileMeta},{"babel-runtime/helpers/classCallCheck":34,"babel-runtime/helpers/createClass":35}],2:[function(_dereq_,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getData=undefined;var _regenerator=_dereq_("babel-runtime/regenerator");var _regenerator2=_interopRequireDefault(_regenerator);var _asyncToGenerator2=_dereq_("babel-runtime/helpers/asyncToGenerator");var _asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2);var _classCallCheck2=_dereq_("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=_dereq_("babel-runtime/helpers/createClass");var _createClass3=_interopRequireDefault(_createClass2);var getData=exports.getData=function(){var _ref3=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function _callee3(blob){return _regenerator2.default.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:return _context3.abrupt("return",new _es6Promise.Promise(function(resolve,reject){var reader=new window.FileReader;reader.onload=function(){return resolve(reader.result)};reader.onerror=reject;reader.readAsArrayBuffer(blob)}));case 1:case"end":return _context3.stop()}}},_callee3,this)}));return function getData(_x4){return _ref3.apply(this,arguments)}}();exports.getChecksum=getChecksum;var _es6Promise=_dereq_("es6-promise");var _sparkMd=_dereq_("spark-md5");var _sparkMd2=_interopRequireDefault(_sparkMd);var _debug=_dereq_("./debug");var _debug2=_interopRequireDefault(_debug);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FileProcessor=function(){function FileProcessor(file,chunkSize){(0,_classCallCheck3.default)(this,FileProcessor);this.paused=false;this.file=file;this.chunkSize=chunkSize;this.unpauseHandlers=[]}(0,_createClass3.default)(FileProcessor,[{key:"run",value:function(){var _ref=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function _callee2(fn){var _this=this;var startIndex=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var endIndex=arguments[2];var file,chunkSize,totalChunks,spark,processIndex,waitForUnpause;return _regenerator2.default.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:file=this.file,chunkSize=this.chunkSize;totalChunks=Math.ceil(file.size/chunkSize);spark=new _sparkMd2.default.ArrayBuffer;(0,_debug2.default)("Starting run on file:");(0,_debug2.default)(" - Total chunks: "+totalChunks);(0,_debug2.default)(" - Start index: "+startIndex);(0,_debug2.default)(" - End index: "+(endIndex||totalChunks));processIndex=function(){var _ref2=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function _callee(index){var start,section,chunk,checksum,shouldContinue;return _regenerator2.default.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(index===totalChunks||index===endIndex)){_context.next=3;break}(0,_debug2.default)("File process complete");return _context.abrupt("return");case 3:if(!_this.paused){_context.next=6;break}_context.next=6;return waitForUnpause();case 6:start=index*chunkSize;section=file.slice(start,start+chunkSize);_context.next=10;return getData(section);case 10:chunk=_context.sent;checksum=getChecksum(spark,chunk);_context.next=14;return fn(checksum,index,chunk);case 14:shouldContinue=_context.sent;if(!(shouldContinue!==false)){_context.next=18;break}_context.next=18;return processIndex(index+1);case 18:case"end":return _context.stop()}}},_callee,_this)}));return function processIndex(_x3){return _ref2.apply(this,arguments)}}();waitForUnpause=function waitForUnpause(){return new _es6Promise.Promise(function(resolve){_this.unpauseHandlers.push(resolve)})};_context2.next=11;return processIndex(startIndex);case 11:case"end":return _context2.stop()}}},_callee2,this)}));function run(_x){return _ref.apply(this,arguments)}return run}()},{key:"pause",value:function pause(){this.paused=true}},{key:"unpause",value:function unpause(){this.paused=false;this.unpauseHandlers.forEach(function(fn){return fn()});this.unpauseHandlers=[]}}]);return FileProcessor}();function getChecksum(spark,chunk){spark.append(chunk);var state=spark.getState();var checksum=spark.end();spark.setState(state);return checksum}exports.default=FileProcessor},{"./debug":5,"babel-runtime/helpers/asyncToGenerator":33,"babel-runtime/helpers/classCallCheck":34,"babel-runtime/helpers/createClass":35,"babel-runtime/regenerator":40,"es6-promise":134,"spark-md5":142}],3:[function(_dereq_,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _regenerator=_dereq_("babel-runtime/regenerator");var _regenerator2=_interopRequireDefault(_regenerator);var _asyncToGenerator2=_dereq_("babel-runtime/helpers/asyncToGenerator");var _asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2);var _extends2=_dereq_("babel-runtime/helpers/extends");var _extends3=_interopRequireDefault(_extends2);var _classCallCheck2=_dereq_("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=_dereq_("babel-runtime/helpers/createClass");var _createClass3=_interopRequireDefault(_createClass2);var safePut=function(){var _ref6=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function _callee6(){var _args6=arguments;return _regenerator2.default.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;_context6.next=3;return _axios.put.apply(null,_args6);case 3:return _context6.abrupt("return",_context6.sent);case 6:_context6.prev=6;_context6.t0=_context6["catch"](0);if(!(_context6.t0 instanceof Error)){_context6.next=12;break}throw _context6.t0;case 12:return _context6.abrupt("return",_context6.t0);case 13:case"end":return _context6.stop()}}},_callee6,this,[[0,6]])}));return function safePut(){return _ref6.apply(this,arguments)}}();var _axios=_dereq_("axios");var _FileMeta=_dereq_("./FileMeta");var _FileMeta2=_interopRequireDefault(_FileMeta);var _FileProcessor=_dereq_("./FileProcessor");var _FileProcessor2=_interopRequireDefault(_FileProcessor);var _debug=_dereq_("./debug");var _debug2=_interopRequireDefault(_debug);var _errors=_dereq_("./errors");var errors=_interopRequireWildcard(_errors);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var MIN_CHUNK_SIZE=262144;var Upload=function(){function Upload(args,allowSmallChunks){(0,_classCallCheck3.default)(this,Upload);var opts=(0,_extends3.default)({chunkSize:MIN_CHUNK_SIZE,storage:window.localStorage,contentType:"text/plain",onChunkUpload:function onChunkUpload(){},onProgress:function onProgress(){},id:null,url:null,file:null},args);if((opts.chunkSize%MIN_CHUNK_SIZE!==0||opts.chunkSize===0)&&!allowSmallChunks){throw new _errors.InvalidChunkSizeError(opts.chunkSize)}if(!opts.id||!opts.url||!opts.file){throw new _errors.MissingOptionsError}(0,_debug2.default)("Creating new upload instance:");(0,_debug2.default)(" - Url: "+opts.url);(0,_debug2.default)(" - Id: "+opts.id);(0,_debug2.default)(" - File size: "+opts.file.size);(0,_debug2.default)(" - Chunk size: "+opts.chunkSize);this.opts=opts;this.meta=new _FileMeta2.default(opts.id,opts.file.size,opts.chunkSize,opts.storage);this.processor=new _FileProcessor2.default(opts.file,opts.chunkSize)}(0,_createClass3.default)(Upload,[{key:"start",value:function(){var _ref=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function _callee5(){var _this=this;var meta,processor,opts,finished,resumeUpload,uploadChunk,validateChunk,getRemoteResumeIndex;return _regenerator2.default.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:meta=this.meta,processor=this.processor,opts=this.opts,finished=this.finished;resumeUpload=function(){var _ref2=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function _callee(){var localResumeIndex,remoteResumeIndex,resumeIndex;return _regenerator2.default.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:localResumeIndex=meta.getResumeIndex();_context.next=3;return getRemoteResumeIndex();case 3:remoteResumeIndex=_context.sent;resumeIndex=Math.min(localResumeIndex,remoteResumeIndex);(0,_debug2.default)("Validating chunks up to index "+resumeIndex);(0,_debug2.default)(" - Remote index: "+remoteResumeIndex);(0,_debug2.default)(" - Local index: "+localResumeIndex);_context.prev=8;_context.next=11;return processor.run(validateChunk,0,resumeIndex);case 11:_context.next=22;break;case 13:_context.prev=13;_context.t0=_context["catch"](8);(0,_debug2.default)("Validation failed, starting from scratch");(0,_debug2.default)(" - Failed chunk index: "+_context.t0.chunkIndex);(0,_debug2.default)(" - Old checksum: "+_context.t0.originalChecksum);(0,_debug2.default)(" - New checksum: "+_context.t0.newChecksum);_context.next=21;return processor.run(uploadChunk);case 21:return _context.abrupt("return");case 22:(0,_debug2.default)("Validation passed, resuming upload");_context.next=25;return processor.run(uploadChunk,resumeIndex);case 25:case"end":return _context.stop()}}},_callee,_this,[[8,13]])}));return function resumeUpload(){return _ref2.apply(this,arguments)}}();uploadChunk=function(){var _ref3=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function _callee2(checksum,index,chunk){var total,start,end,headers,res;return _regenerator2.default.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:total=opts.file.size;start=index*opts.chunkSize;end=index*opts.chunkSize+chunk.byteLength-1;headers={"Content-Type":opts.contentType,"Content-Range":"bytes "+start+"-"+end+"/"+total};(0,_debug2.default)("Uploading chunk "+index+":");(0,_debug2.default)(" - Chunk length: "+chunk.byteLength);(0,_debug2.default)(" - Start: "+start);(0,_debug2.default)(" - End: "+end);_context2.next=10;return safePut(opts.url,chunk,{headers:headers,onUploadProgress:function onUploadProgress(progressEvent){opts.onProgress({totalBytes:total,uploadedBytes:start+progressEvent.loaded,chunkIndex:index,chunkLength:chunk.byteLength})}});case 10:res=_context2.sent;checkResponseStatus(res,opts,[200,201,308]);(0,_debug2.default)("Chunk upload succeeded, adding checksum "+checksum);meta.addChecksum(index,checksum);opts.onChunkUpload({totalBytes:total,uploadedBytes:end+1,chunkIndex:index,chunkLength:chunk.byteLength});case 15:case"end":return _context2.stop()}}},_callee2,_this)}));return function uploadChunk(_x,_x2,_x3){return _ref3.apply(this,arguments)}}();validateChunk=function(){var _ref4=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function _callee3(newChecksum,index){var originalChecksum,isChunkValid;return _regenerator2.default.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:originalChecksum=meta.getChecksum(index);isChunkValid=originalChecksum===newChecksum;if(isChunkValid){_context3.next=5;break}meta.reset();throw new _errors.DifferentChunkError(index,originalChecksum,newChecksum);case 5:case"end":return _context3.stop()}}},_callee3,_this)}));return function validateChunk(_x4,_x5){return _ref4.apply(this,arguments)}}();getRemoteResumeIndex=function(){var _ref5=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function _callee4(){var headers,res,header,range,bytesReceived;return _regenerator2.default.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:headers={"Content-Range":"bytes */"+opts.file.size};(0,_debug2.default)("Retrieving upload status from GCS");_context4.next=4;return safePut(opts.url,null,{headers:headers});case 4:res=_context4.sent;checkResponseStatus(res,opts,[308]);header=res.headers["range"];(0,_debug2.default)("Received upload status from GCS: "+header);range=header.match(/(\d+?)-(\d+?)$/);bytesReceived=parseInt(range[2])+1;return _context4.abrupt("return",Math.floor(bytesReceived/opts.chunkSize));case 11:case"end":return _context4.stop()}}},_callee4,_this)}));return function getRemoteResumeIndex(){return _ref5.apply(this,arguments)}}();if(!finished){_context5.next=7;break}throw new _errors.UploadAlreadyFinishedError;case 7:if(!meta.isResumable()){_context5.next=13;break}(0,_debug2.default)("Upload might be resumable");_context5.next=11;return resumeUpload();case 11:_context5.next=16;break;case 13:(0,_debug2.default)("Upload not resumable, starting from scratch");_context5.next=16;return processor.run(uploadChunk);case 16:(0,_debug2.default)("Upload complete, resetting meta");meta.reset();this.finished=true;case 19:case"end":return _context5.stop()}}},_callee5,this)}));function start(){return _ref.apply(this,arguments)}return start}()},{key:"pause",value:function pause(){this.processor.pause();(0,_debug2.default)("Upload paused")}},{key:"unpause",value:function unpause(){this.processor.unpause();(0,_debug2.default)("Upload unpaused")}},{key:"cancel",value:function cancel(){this.processor.pause();this.meta.reset();(0,_debug2.default)("Upload cancelled")}}]);return Upload}();Upload.errors=errors;exports.default=Upload;function checkResponseStatus(res,opts){var allowed=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var status=res.status;if(allowed.indexOf(status)>-1){return true}switch(status){case 308:throw new _errors.UploadIncompleteError;case 201:case 200:throw new _errors.FileAlreadyUploadedError(opts.id,opts.url);case 404:throw new _errors.UrlNotFoundError(opts.url);case 500:case 502:case 503:case 504:throw new _errors.UploadFailedError(status);default:throw new _errors.UnknownResponseError(res)}}},{"./FileMeta":1,"./FileProcessor":2,"./debug":5,"./errors":6,axios:9,"babel-runtime/helpers/asyncToGenerator":33,"babel-runtime/helpers/classCallCheck":34,"babel-runtime/helpers/createClass":35,"babel-runtime/helpers/extends":36,"babel-runtime/regenerator":40}],4:[function(_dereq_,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _regenerator=_dereq_("babel-runtime/regenerator");var _regenerator2=_interopRequireDefault(_regenerator);var _asyncToGenerator2=_dereq_("babel-runtime/helpers/asyncToGenerator");var _asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2);var _extends2=_dereq_("babel-runtime/helpers/extends");var _extends3=_interopRequireDefault(_extends2);var _classCallCheck2=_dereq_("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=_dereq_("babel-runtime/helpers/createClass");var _createClass3=_interopRequireDefault(_createClass2);var safePut=function(){var _ref4=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function _callee4(){var _args4=arguments;return _regenerator2.default.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return _axios.put.apply(null,_args4);case 3:return _context4.abrupt("return",_context4.sent);case 6:_context4.prev=6;_context4.t0=_context4["catch"](0);if(!(_context4.t0 instanceof Error)){_context4.next=12;break}throw _context4.t0;case 12:return _context4.abrupt("return",_context4.t0);case 13:case"end":return _context4.stop()}}},_callee4,this,[[0,6]])}));return function safePut(){return _ref4.apply(this,arguments)}}();var _axios=_dereq_("axios");var _FileMeta=_dereq_("./FileMeta");var _FileMeta2=_interopRequireDefault(_FileMeta);var _FileProcessor=_dereq_("./FileProcessor");var _debug=_dereq_("./debug");var _debug2=_interopRequireDefault(_debug);var _sparkMd=_dereq_("spark-md5");var _sparkMd2=_interopRequireDefault(_sparkMd);var _asyncRetry=_dereq_("async-retry");var _asyncRetry2=_interopRequireDefault(_asyncRetry);var _errors=_dereq_("./errors");var errors=_interopRequireWildcard(_errors);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var MIN_CHUNK_SIZE=262144;var UploadStream=function(){function UploadStream(args,allowSmallChunks){(0,_classCallCheck3.default)(this,UploadStream);this.paused=false;this.unpauseHandlers=[];this.spark=new _sparkMd2.default.ArrayBuffer;var opts=(0,_extends3.default)({chunkSize:MIN_CHUNK_SIZE,storage:window.localStorage,contentType:"text/plain",onChunkUpload:function onChunkUpload(){},onProgress:function onProgress(){},id:null,url:null,backoffMillis:1e3,backoffRetryLimit:5},args);if((opts.chunkSize%MIN_CHUNK_SIZE!==0||opts.chunkSize===0)&&!allowSmallChunks){throw new _errors.InvalidChunkSizeError(opts.chunkSize)}if(!opts.id){throw new _errors.MissingOptionsError("The 'id' option is required")}if(!opts.url){throw new _errors.MissingOptionsError("The 'url' option is required")}(0,_debug2.default)("Creating new upload stream instance:");(0,_debug2.default)(" - Url: "+opts.url);(0,_debug2.default)(" - Id: "+opts.id);(0,_debug2.default)(" - File size: Unknown / Streaming");(0,_debug2.default)(" - Chunk size: "+opts.chunkSize);this.opts=opts;this.meta=new _FileMeta2.default(opts.id,0,opts.chunkSize,opts.storage)}(0,_createClass3.default)(UploadStream,[{key:"uploadChunk",value:function(){var _ref=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function _callee2(index,chunk){var _this=this;var backoff=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var opts,meta,start,end,checksum,headers;return _regenerator2.default.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:opts=this.opts,meta=this.meta;start=index*opts.chunkSize;end=index*opts.chunkSize+chunk.byteLength-1;if(!this.paused){_context2.next=6;break}_context2.next=6;return this.waitForUnpause();case 6:checksum=(0,_FileProcessor.getChecksum)(this.spark,chunk);headers={"Content-Type":opts.contentType,"Content-Range":"bytes "+start+"-"+end+"/*"};(0,_debug2.default)("Uploading chunk "+index+":");(0,_debug2.default)(" - Chunk length: "+chunk.byteLength);(0,_debug2.default)(" - Start: "+start);(0,_debug2.default)(" - End: "+end);_context2.prev=12;_context2.next=15;return(0,_asyncRetry2.default)(function(){var _ref2=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function _callee(bail,num){var res;return _regenerator2.default.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return safePut(opts.url,chunk,{headers:headers,onUploadProgress:function onUploadProgress(progressEvent){opts.onProgress({totalBytes:start+chunk.byteLength,uploadedBytes:start+progressEvent.loaded,chunkIndex:index,chunkLength:chunk.byteLength})}});case 2:res=_context.sent;checkResponseStatus(res,opts,[200,201,308]);case 4:case"end":return _context.stop()}}},_callee,_this)}));return function(_x4,_x5){return _ref2.apply(this,arguments)}}(),{retries:opts.backoffRetryLimit,minTimeout:opts.backoffMillis});case 15:_context2.next=20;break;case 17:_context2.prev=17;_context2.t0=_context2["catch"](12);throw new _errors.UploadUnableToRecoverError;case 20:(0,_debug2.default)("Chunk upload succeeded, adding checksum "+checksum);meta.addChecksum(index,checksum);opts.onChunkUpload({uploadedBytes:end+1,chunkIndex:index,chunkLength:chunk.byteLength});case 23:case"end":return _context2.stop()}}},_callee2,this,[[12,17]])}));function uploadChunk(_x,_x2){return _ref.apply(this,arguments)}return uploadChunk}()},{key:"getRemoteResumeIndex",value:function(){var _ref3=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function _callee3(){var opts,headers,res,header,range,bytesReceived;return _regenerator2.default.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:opts=this.opts;headers={"Content-Range":"bytes */*"};(0,_debug2.default)("Retrieving upload status from GCS");_context3.next=5;return safePut(opts.url,null,{headers:headers});case 5:res=_context3.sent;(0,_debug2.default)(res);checkResponseStatus(res,opts,[308]);header=res.headers["range"];(0,_debug2.default)("Received upload status from GCS: "+header);range=header.match(/(\d+?)-(\d+?)$/);bytesReceived=parseInt(range[2])+1;return _context3.abrupt("return",Math.floor(bytesReceived/opts.chunkSize));case 13:case"end":return _context3.stop()}}},_callee3,this)}));function getRemoteResumeIndex(){return _ref3.apply(this,arguments)}return getRemoteResumeIndex}()},{key:"pause",value:function pause(){(0,_debug2.default)("Upload Stream paused");this.paused=true}},{key:"unpause",value:function unpause(){(0,_debug2.default)("Upload Stream unpaused");this.paused=false;this.unpauseHandlers.forEach(function(fn){return fn()});this.unpauseHandlers=[]}},{key:"waitForUnpause",value:function waitForUnpause(){var _this2=this;return new Promise(function(resolve){_this2.unpauseHandlers.push(resolve)})}},{key:"cancel",value:function cancel(){this.meta.reset();(0,_debug2.default)("Upload cancelled")}}]);return UploadStream}();UploadStream.errors=errors;exports.default=UploadStream;function checkResponseStatus(res,opts){var allowed=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var status=res.status;if(allowed.indexOf(status)>-1){return true}switch(status){case 308:throw new _errors.UploadIncompleteError;case 201:case 200:throw new _errors.FileAlreadyUploadedError(opts.id,opts.url);case 404:throw new _errors.UrlNotFoundError(opts.url);case 500:case 502:case 503:case 504:throw new _errors.UploadFailedError(status);default:throw new _errors.UnknownResponseError(res)}}},{"./FileMeta":1,"./FileProcessor":2,"./debug":5,"./errors":6,"async-retry":8,axios:9,"babel-runtime/helpers/asyncToGenerator":33,"babel-runtime/helpers/classCallCheck":34,"babel-runtime/helpers/createClass":35,"babel-runtime/helpers/extends":36,"babel-runtime/regenerator":40,"spark-md5":142}],5:[function(_dereq_,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _debug=_dereq_("debug");var _debug2=_interopRequireDefault(_debug);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=(0,_debug2.default)("gcs-browser-upload")},{debug:131}],6:[function(_dereq_,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UploadAlreadyFinishedError=exports.InvalidChunkSizeError=exports.UploadIncompleteError=exports.MissingOptionsError=exports.UnknownResponseError=exports.UploadUnableToRecoverError=exports.UploadFailedError=exports.UrlNotFoundError=exports.FileAlreadyUploadedError=exports.ResumeIndexesOutOfSyncError=exports.DifferentChunkError=undefined;var _classCallCheck2=_dereq_("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _possibleConstructorReturn2=_dereq_("babel-runtime/helpers/possibleConstructorReturn");var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=_dereq_("babel-runtime/helpers/inherits");var _inherits3=_interopRequireDefault(_inherits2);var _es6Error=_dereq_("es6-error");var _es6Error2=_interopRequireDefault(_es6Error);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DifferentChunkError=exports.DifferentChunkError=function(_ExtendableError){(0,_inherits3.default)(DifferentChunkError,_ExtendableError);function DifferentChunkError(chunkIndex,originalChecksum,newChecksum){(0,_classCallCheck3.default)(this,DifferentChunkError);var _this=(0,_possibleConstructorReturn3.default)(this,(DifferentChunkError.__proto__||Object.getPrototypeOf(DifferentChunkError)).call(this,"Chunk at index '"+chunkIndex+"' is different to original"));_this.chunkIndex=chunkIndex;_this.originalChecksum=originalChecksum;_this.newChecksum=newChecksum;return _this}return DifferentChunkError}(_es6Error2.default);var ResumeIndexesOutOfSyncError=exports.ResumeIndexesOutOfSyncError=function(_ExtendableError2){(0,_inherits3.default)(ResumeIndexesOutOfSyncError,_ExtendableError2);function ResumeIndexesOutOfSyncError(localResumeIndex,remoteResumeIndex){(0,_classCallCheck3.default)(this,ResumeIndexesOutOfSyncError);return(0,_possibleConstructorReturn3.default)(this,(ResumeIndexesOutOfSyncError.__proto__||Object.getPrototypeOf(ResumeIndexesOutOfSyncError)).call(this,"Local resume index ("+localResumeIndex+") is our of sync with the remote resume inxed ("+remoteResumeIndex+")"))}return ResumeIndexesOutOfSyncError}(_es6Error2.default);var FileAlreadyUploadedError=exports.FileAlreadyUploadedError=function(_ExtendableError3){(0,_inherits3.default)(FileAlreadyUploadedError,_ExtendableError3);function FileAlreadyUploadedError(id,url){(0,_classCallCheck3.default)(this,FileAlreadyUploadedError);return(0,_possibleConstructorReturn3.default)(this,(FileAlreadyUploadedError.__proto__||Object.getPrototypeOf(FileAlreadyUploadedError)).call(this,"File '"+id+"' has already been uploaded to unique url '"+url+"'"))}return FileAlreadyUploadedError}(_es6Error2.default);var UrlNotFoundError=exports.UrlNotFoundError=function(_ExtendableError4){(0,_inherits3.default)(UrlNotFoundError,_ExtendableError4);function UrlNotFoundError(url){(0,_classCallCheck3.default)(this,UrlNotFoundError);return(0,_possibleConstructorReturn3.default)(this,(UrlNotFoundError.__proto__||Object.getPrototypeOf(UrlNotFoundError)).call(this,"Upload URL '"+url+"' has either expired or is invalid"))}return UrlNotFoundError}(_es6Error2.default);var UploadFailedError=exports.UploadFailedError=function(_ExtendableError5){(0,_inherits3.default)(UploadFailedError,_ExtendableError5);function UploadFailedError(status){(0,_classCallCheck3.default)(this,UploadFailedError);return(0,_possibleConstructorReturn3.default)(this,(UploadFailedError.__proto__||Object.getPrototypeOf(UploadFailedError)).call(this,"HTTP status "+status+" received from GCS, consider retrying"))}return UploadFailedError}(_es6Error2.default);var UploadUnableToRecoverError=exports.UploadUnableToRecoverError=function(_ExtendableError6){(0,_inherits3.default)(UploadUnableToRecoverError,_ExtendableError6);function UploadUnableToRecoverError(){(0,_classCallCheck3.default)(this,UploadUnableToRecoverError);return(0,_possibleConstructorReturn3.default)(this,(UploadUnableToRecoverError.__proto__||Object.getPrototypeOf(UploadUnableToRecoverError)).call(this,"The upload what unable to recover after trying restricted exponention backoff"))}return UploadUnableToRecoverError}(_es6Error2.default);var UnknownResponseError=exports.UnknownResponseError=function(_ExtendableError7){(0,_inherits3.default)(UnknownResponseError,_ExtendableError7);function UnknownResponseError(res){(0,_classCallCheck3.default)(this,UnknownResponseError);var _this7=(0,_possibleConstructorReturn3.default)(this,(UnknownResponseError.__proto__||Object.getPrototypeOf(UnknownResponseError)).call(this,"Unknown response received from GCS"));_this7.res=res;return _this7}return UnknownResponseError}(_es6Error2.default);var MissingOptionsError=exports.MissingOptionsError=function(_ExtendableError8){(0,_inherits3.default)(MissingOptionsError,_ExtendableError8);function MissingOptionsError(details){(0,_classCallCheck3.default)(this,MissingOptionsError);return(0,_possibleConstructorReturn3.default)(this,(MissingOptionsError.__proto__||Object.getPrototypeOf(MissingOptionsError)).call(this,"Missing required options for Upload - "+details))}return MissingOptionsError}(_es6Error2.default);var UploadIncompleteError=exports.UploadIncompleteError=function(_ExtendableError9){(0,_inherits3.default)(UploadIncompleteError,_ExtendableError9);function UploadIncompleteError(){(0,_classCallCheck3.default)(this,UploadIncompleteError);return(0,_possibleConstructorReturn3.default)(this,(UploadIncompleteError.__proto__||Object.getPrototypeOf(UploadIncompleteError)).call(this,"Upload is not complete"))}return UploadIncompleteError}(_es6Error2.default);var InvalidChunkSizeError=exports.InvalidChunkSizeError=function(_ExtendableError10){(0,_inherits3.default)(InvalidChunkSizeError,_ExtendableError10);function InvalidChunkSizeError(chunkSize){(0,_classCallCheck3.default)(this,InvalidChunkSizeError);return(0,_possibleConstructorReturn3.default)(this,(InvalidChunkSizeError.__proto__||Object.getPrototypeOf(InvalidChunkSizeError)).call(this,"Invalid chunk size "+chunkSize+", must be a multiple of 262144"))}return InvalidChunkSizeError}(_es6Error2.default);var UploadAlreadyFinishedError=exports.UploadAlreadyFinishedError=function(_ExtendableError11){(0,_inherits3.default)(UploadAlreadyFinishedError,_ExtendableError11);function UploadAlreadyFinishedError(){(0,_classCallCheck3.default)(this,UploadAlreadyFinishedError);return(0,_possibleConstructorReturn3.default)(this,(UploadAlreadyFinishedError.__proto__||Object.getPrototypeOf(UploadAlreadyFinishedError)).call(this,"Upload instance has already finished"))}return UploadAlreadyFinishedError}(_es6Error2.default)},{"babel-runtime/helpers/classCallCheck":34,"babel-runtime/helpers/inherits":37,"babel-runtime/helpers/possibleConstructorReturn":38,"es6-error":133}],7:[function(_dereq_,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _Upload=_dereq_("./Upload");var _Upload2=_interopRequireDefault(_Upload);var _UploadStream=_dereq_("./UploadStream");var _UploadStream2=_interopRequireDefault(_UploadStream);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default={Upload:_Upload2.default,UploadStream:_UploadStream2.default}},{"./Upload":3,"./UploadStream":4}],8:[function(_dereq_,module,exports){"use strict";var retrier=_dereq_("retry");module.exports=function(fn,opts){opts=opts||{};return new Promise(function(resolve,reject){var op=retrier.operation(opts);var bail=function bail(err){return reject(err||new Error("Aborted"))};var onError=function onError(err){if(err.bail){return bail(err)}if(!op.retry(err)){reject(op.mainError())}else if(opts.onRetry){opts.onRetry(err)}};op.attempt(function(num){var val=void 0;try{val=fn(bail,num)}catch(err){return onError(err)}if(val instanceof Promise){val.then(resolve,onError)}else{resolve(val)}})})}},{retry:139}],9:[function(_dereq_,module,exports){module.exports=_dereq_("./lib/axios")},{"./lib/axios":11}],10:[function(_dereq_,module,exports){"use strict";var utils=_dereq_("./../utils");var buildURL=_dereq_("./../helpers/buildURL");var parseHeaders=_dereq_("./../helpers/parseHeaders");var transformData=_dereq_("./../helpers/transformData");var isURLSameOrigin=_dereq_("./../helpers/isURLSameOrigin");var btoa=window.btoa||_dereq_("./../helpers/btoa");module.exports=function xhrAdapter(resolve,reject,config){var requestData=config.data;var requestHeaders=config.headers;if(utils.isFormData(requestData)){delete requestHeaders["Content-Type"]}var request=new XMLHttpRequest;if(window.XDomainRequest&&!("withCredentials"in request)&&!isURLSameOrigin(config.url)){request=new window.XDomainRequest}if(config.auth){var username=config.auth.username||"";var password=config.auth.password||"";requestHeaders.Authorization="Basic "+btoa(username+":"+password)}request.open(config.method.toUpperCase(),buildURL(config.url,config.params,config.paramsSerializer),true);request.timeout=config.timeout;request.onload=function handleLoad(){if(!request){return}var responseHeaders="getAllResponseHeaders"in request?parseHeaders(request.getAllResponseHeaders()):null;var responseData=["text",""].indexOf(config.responseType||"")!==-1?request.responseText:request.response;var response={data:transformData(responseData,responseHeaders,config.transformResponse),status:request.status===1223?204:request.status,statusText:request.status===1223?"No Content":request.statusText,headers:responseHeaders,config:config};(response.status>=200&&response.status<300||!("status"in request)&&response.responseText?resolve:reject)(response);request=null};request.onerror=function handleError(){reject(new Error("Network Error"));request=null};if(utils.isStandardBrowserEnv()){var cookies=_dereq_("./../helpers/cookies");var xsrfValue=config.withCredentials||isURLSameOrigin(config.url)?cookies.read(config.xsrfCookieName):undefined;if(xsrfValue){requestHeaders[config.xsrfHeaderName]=xsrfValue}}if("setRequestHeader"in request){utils.forEach(requestHeaders,function setRequestHeader(val,key){if(typeof requestData==="undefined"&&key.toLowerCase()==="content-type"){delete requestHeaders[key]}else{request.setRequestHeader(key,val)}})}if(config.withCredentials){request.withCredentials=true}if(config.responseType){try{request.responseType=config.responseType}catch(e){if(request.responseType!=="json"){throw e}}}if(utils.isArrayBuffer(requestData)){requestData=new DataView(requestData)}request.send(requestData)}},{"./../helpers/btoa":16,"./../helpers/buildURL":17,"./../helpers/cookies":19,"./../helpers/isURLSameOrigin":21,"./../helpers/parseHeaders":22,"./../helpers/transformData":24,"./../utils":25}],11:[function(_dereq_,module,exports){"use strict";var defaults=_dereq_("./defaults");var utils=_dereq_("./utils");var dispatchRequest=_dereq_("./core/dispatchRequest");var InterceptorManager=_dereq_("./core/InterceptorManager");var isAbsoluteURL=_dereq_("./helpers/isAbsoluteURL");var combineURLs=_dereq_("./helpers/combineURLs");var bind=_dereq_("./helpers/bind");var transformData=_dereq_("./helpers/transformData");function Axios(defaultConfig){this.defaults=utils.merge({},defaultConfig);this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios.prototype.request=function request(config){if(typeof config==="string"){config=utils.merge({url:arguments[0]},arguments[1])}config=utils.merge(defaults,this.defaults,{method:"get"},config);if(config.baseURL&&!isAbsoluteURL(config.url)){config.url=combineURLs(config.baseURL,config.url)}config.withCredentials=config.withCredentials||this.defaults.withCredentials;config.data=transformData(config.data,config.headers,config.transformRequest);config.headers=utils.merge(config.headers.common||{},config.headers[config.method]||{},config.headers||{});utils.forEach(["delete","get","head","post","put","patch","common"],function cleanHeaderConfig(method){delete config.headers[method]});var chain=[dispatchRequest,undefined];var promise=Promise.resolve(config);this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor){chain.unshift(interceptor.fulfilled,interceptor.rejected)});this.interceptors.response.forEach(function pushResponseInterceptors(interceptor){chain.push(interceptor.fulfilled,interceptor.rejected)});while(chain.length){promise=promise.then(chain.shift(),chain.shift())}return promise};var defaultInstance=new Axios(defaults);var axios=module.exports=bind(Axios.prototype.request,defaultInstance);axios.create=function create(defaultConfig){return new Axios(defaultConfig)};axios.defaults=defaultInstance.defaults;axios.all=function all(promises){return Promise.all(promises)};axios.spread=_dereq_("./helpers/spread");axios.interceptors=defaultInstance.interceptors;utils.forEach(["delete","get","head"],function forEachMethodNoData(method){Axios.prototype[method]=function(url,config){return this.request(utils.merge(config||{},{method:method,url:url}))};axios[method]=bind(Axios.prototype[method],defaultInstance)});utils.forEach(["post","put","patch"],function forEachMethodWithData(method){Axios.prototype[method]=function(url,data,config){return this.request(utils.merge(config||{},{method:method,url:url,data:data}))};axios[method]=bind(Axios.prototype[method],defaultInstance)})},{"./core/InterceptorManager":12,"./core/dispatchRequest":13,"./defaults":14,"./helpers/bind":15,"./helpers/combineURLs":18,"./helpers/isAbsoluteURL":20,"./helpers/spread":23,"./helpers/transformData":24,"./utils":25}],12:[function(_dereq_,module,exports){"use strict";var utils=_dereq_("./../utils");function InterceptorManager(){this.handlers=[]}InterceptorManager.prototype.use=function use(fulfilled,rejected){this.handlers.push({fulfilled:fulfilled,rejected:rejected});return this.handlers.length-1};InterceptorManager.prototype.eject=function eject(id){if(this.handlers[id]){this.handlers[id]=null}};InterceptorManager.prototype.forEach=function forEach(fn){utils.forEach(this.handlers,function forEachHandler(h){if(h!==null){fn(h)}})};module.exports=InterceptorManager},{"./../utils":25}],13:[function(_dereq_,module,exports){(function(process){"use strict";module.exports=function dispatchRequest(config){return new Promise(function executor(resolve,reject){try{var adapter;if(typeof config.adapter==="function"){adapter=config.adapter}else if(typeof XMLHttpRequest!=="undefined"){adapter=_dereq_("../adapters/xhr")}else if(typeof process!=="undefined"){adapter=_dereq_("../adapters/http")}if(typeof adapter==="function"){adapter(resolve,reject,config)}}catch(e){reject(e)}})}}).call(this,_dereq_("_process"))},{"../adapters/http":10,"../adapters/xhr":10,_process:136}],14:[function(_dereq_,module,exports){"use strict";var utils=_dereq_("./utils");var PROTECTION_PREFIX=/^\)\]\}',?\n/;var DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};module.exports={transformRequest:[function transformResponseJSON(data,headers){if(utils.isFormData(data)){return data}if(utils.isArrayBuffer(data)){return data}if(utils.isArrayBufferView(data)){return data.buffer}if(utils.isObject(data)&&!utils.isFile(data)&&!utils.isBlob(data)){if(!utils.isUndefined(headers)){utils.forEach(headers,function processContentTypeHeader(val,key){if(key.toLowerCase()==="content-type"){headers["Content-Type"]=val}});if(utils.isUndefined(headers["Content-Type"])){headers["Content-Type"]="application/json;charset=utf-8"}}return JSON.stringify(data)}return data}],transformResponse:[function transformResponseJSON(data){if(typeof data==="string"){data=data.replace(PROTECTION_PREFIX,"");try{data=JSON.parse(data)}catch(e){}}return data}],headers:{common:{Accept:"application/json, text/plain, */*"},patch:utils.merge(DEFAULT_CONTENT_TYPE),post:utils.merge(DEFAULT_CONTENT_TYPE),put:utils.merge(DEFAULT_CONTENT_TYPE)},timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"}},{"./utils":25}],15:[function(_dereq_,module,exports){"use strict";module.exports=function bind(fn,thisArg){return function wrap(){var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i]}return fn.apply(thisArg,args)}}},{}],16:[function(_dereq_,module,exports){"use strict";var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function InvalidCharacterError(message){this.message=message}InvalidCharacterError.prototype=new Error;InvalidCharacterError.prototype.code=5;InvalidCharacterError.prototype.name="InvalidCharacterError";function btoa(input){var str=String(input);var output="";for(var block,charCode,idx=0,map=chars;str.charAt(idx|0)||(map="=",idx%1);output+=map.charAt(63&block>>8-idx%1*8)){charCode=str.charCodeAt(idx+=3/4);if(charCode>255){throw new InvalidCharacterError("INVALID_CHARACTER_ERR: DOM Exception 5")}block=block<<8|charCode}return output}module.exports=btoa},{}],17:[function(_dereq_,module,exports){"use strict";var utils=_dereq_("./../utils");function encode(val){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}module.exports=function buildURL(url,params,paramsSerializer){if(!params){return url}var serializedParams;if(paramsSerializer){serializedParams=paramsSerializer(params)}else{var parts=[];utils.forEach(params,function serialize(val,key){if(val===null||typeof val==="undefined"){return}if(utils.isArray(val)){key=key+"[]"}if(!utils.isArray(val)){val=[val]}utils.forEach(val,function parseValue(v){if(utils.isDate(v)){v=v.toISOString()}else if(utils.isObject(v)){v=JSON.stringify(v)}parts.push(encode(key)+"="+encode(v))})});serializedParams=parts.join("&")}if(serializedParams){url+=(url.indexOf("?")===-1?"?":"&")+serializedParams}return url}},{"./../utils":25}],18:[function(_dereq_,module,exports){"use strict";module.exports=function combineURLs(baseURL,relativeURL){return baseURL.replace(/\/+$/,"")+"/"+relativeURL.replace(/^\/+/,"")}},{}],19:[function(_dereq_,module,exports){"use strict";var utils=_dereq_("./../utils");module.exports=utils.isStandardBrowserEnv()?function standardBrowserEnv(){return{write:function write(name,value,expires,path,domain,secure){var cookie=[];cookie.push(name+"="+encodeURIComponent(value));if(utils.isNumber(expires)){cookie.push("expires="+new Date(expires).toGMTString())}if(utils.isString(path)){cookie.push("path="+path)}if(utils.isString(domain)){cookie.push("domain="+domain)}if(secure===true){cookie.push("secure")}document.cookie=cookie.join("; ")},read:function read(name){var match=document.cookie.match(new RegExp("(^|;\\s*)("+name+")=([^;]*)"));return match?decodeURIComponent(match[3]):null},remove:function remove(name){this.write(name,"",Date.now()-864e5)}}}():function nonStandardBrowserEnv(){return{write:function write(){},read:function read(){return null},remove:function remove(){}}}()},{"./../utils":25}],20:[function(_dereq_,module,exports){"use strict";module.exports=function isAbsoluteURL(url){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(url)}},{}],21:[function(_dereq_,module,exports){"use strict";var utils=_dereq_("./../utils");module.exports=utils.isStandardBrowserEnv()?function standardBrowserEnv(){var msie=/(msie|trident)/i.test(navigator.userAgent);var urlParsingNode=document.createElement("a");var originURL;function resolveURL(url){var href=url;if(msie){urlParsingNode.setAttribute("href",href);href=urlParsingNode.href}urlParsingNode.setAttribute("href",href);return{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,""):"",host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,""):"",hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,""):"",hostname:urlParsingNode.hostname,port:urlParsingNode.port,pathname:urlParsingNode.pathname.charAt(0)==="/"?urlParsingNode.pathname:"/"+urlParsingNode.pathname}}originURL=resolveURL(window.location.href);return function isURLSameOrigin(requestURL){var parsed=utils.isString(requestURL)?resolveURL(requestURL):requestURL;return parsed.protocol===originURL.protocol&&parsed.host===originURL.host}}():function nonStandardBrowserEnv(){return function isURLSameOrigin(){return true}}()},{"./../utils":25}],22:[function(_dereq_,module,exports){"use strict";var utils=_dereq_("./../utils");module.exports=function parseHeaders(headers){var parsed={};var key;var val;var i;if(!headers){return parsed}utils.forEach(headers.split("\n"),function parser(line){i=line.indexOf(":");key=utils.trim(line.substr(0,i)).toLowerCase();val=utils.trim(line.substr(i+1));if(key){parsed[key]=parsed[key]?parsed[key]+", "+val:val}});return parsed}},{"./../utils":25}],23:[function(_dereq_,module,exports){"use strict";module.exports=function spread(callback){return function wrap(arr){return callback.apply(null,arr)}}},{}],24:[function(_dereq_,module,exports){"use strict";var utils=_dereq_("./../utils");module.exports=function transformData(data,headers,fns){utils.forEach(fns,function transform(fn){data=fn(data,headers)});return data}},{"./../utils":25}],25:[function(_dereq_,module,exports){"use strict";var toString=Object.prototype.toString;function isArray(val){return toString.call(val)==="[object Array]"}function isArrayBuffer(val){return toString.call(val)==="[object ArrayBuffer]"}function isFormData(val){return toString.call(val)==="[object FormData]"}function isArrayBufferView(val){var result;if(typeof ArrayBuffer!=="undefined"&&ArrayBuffer.isView){result=ArrayBuffer.isView(val)}else{result=val&&val.buffer&&val.buffer instanceof ArrayBuffer}return result}function isString(val){return typeof val==="string"}function isNumber(val){return typeof val==="number"}function isUndefined(val){return typeof val==="undefined"}function isObject(val){return val!==null&&typeof val==="object"}function isDate(val){return toString.call(val)==="[object Date]"}function isFile(val){return toString.call(val)==="[object File]"}function isBlob(val){return toString.call(val)==="[object Blob]"}function trim(str){return str.replace(/^\s*/,"").replace(/\s*$/,"")}function isStandardBrowserEnv(){return typeof window!=="undefined"&&typeof document!=="undefined"&&typeof document.createElement==="function"}function forEach(obj,fn){if(obj===null||typeof obj==="undefined"){return}if(typeof obj!=="object"&&!isArray(obj)){obj=[obj]}if(isArray(obj)){for(var i=0,l=obj.length;i<l;i++){fn.call(null,obj[i],i,obj)}}else{for(var key in obj){if(obj.hasOwnProperty(key)){fn.call(null,obj[key],key,obj)}}}}function merge(){var result={};function assignValue(val,key){if(typeof result[key]==="object"&&typeof val==="object"){result[key]=merge(result[key],val)}else{result[key]=val}}for(var i=0,l=arguments.length;i<l;i++){forEach(arguments[i],assignValue)}return result}module.exports={isArray:isArray,isArrayBuffer:isArrayBuffer,isFormData:isFormData,isArrayBufferView:isArrayBufferView,isString:isString,isNumber:isNumber,isObject:isObject,isUndefined:isUndefined,isDate:isDate,isFile:isFile,isBlob:isBlob,isStandardBrowserEnv:isStandardBrowserEnv,forEach:forEach,merge:merge,trim:trim}},{}],26:[function(_dereq_,module,exports){module.exports={default:_dereq_("core-js/library/fn/object/assign"),__esModule:true}},{"core-js/library/fn/object/assign":41}],27:[function(_dereq_,module,exports){module.exports={default:_dereq_("core-js/library/fn/object/create"),__esModule:true}},{"core-js/library/fn/object/create":42}],28:[function(_dereq_,module,exports){module.exports={default:_dereq_("core-js/library/fn/object/define-property"),__esModule:true}},{"core-js/library/fn/object/define-property":43}],29:[function(_dereq_,module,exports){module.exports={default:_dereq_("core-js/library/fn/object/set-prototype-of"),__esModule:true}},{"core-js/library/fn/object/set-prototype-of":44}],30:[function(_dereq_,module,exports){module.exports={default:_dereq_("core-js/library/fn/promise"),__esModule:true}},{"core-js/library/fn/promise":45}],31:[function(_dereq_,module,exports){module.exports={default:_dereq_("core-js/library/fn/symbol"),__esModule:true}},{"core-js/library/fn/symbol":46}],32:[function(_dereq_,module,exports){module.exports={default:_dereq_("core-js/library/fn/symbol/iterator"),__esModule:true}},{"core-js/library/fn/symbol/iterator":47}],33:[function(_dereq_,module,exports){"use strict";exports.__esModule=true;var _promise=_dereq_("../core-js/promise");var _promise2=_interopRequireDefault(_promise);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(fn){return function(){var gen=fn.apply(this,arguments);return new _promise2.default(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return _promise2.default.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}},{"../core-js/promise":30}],34:[function(_dereq_,module,exports){"use strict";exports.__esModule=true;exports.default=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}},{}],35:[function(_dereq_,module,exports){"use strict";exports.__esModule=true;var _defineProperty=_dereq_("../core-js/object/define-property");var _defineProperty2=_interopRequireDefault(_defineProperty);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;(0,_defineProperty2.default)(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}()},{"../core-js/object/define-property":28}],36:[function(_dereq_,module,exports){"use strict";exports.__esModule=true;var _assign=_dereq_("../core-js/object/assign");var _assign2=_interopRequireDefault(_assign);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=_assign2.default||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target}},{"../core-js/object/assign":26}],37:[function(_dereq_,module,exports){"use strict";exports.__esModule=true;var _setPrototypeOf=_dereq_("../core-js/object/set-prototype-of");var _setPrototypeOf2=_interopRequireDefault(_setPrototypeOf);var _create=_dereq_("../core-js/object/create");var _create2=_interopRequireDefault(_create);var _typeof2=_dereq_("../helpers/typeof");var _typeof3=_interopRequireDefault(_typeof2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":(0,_typeof3.default)(superClass)))}subClass.prototype=(0,_create2.default)(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)_setPrototypeOf2.default?(0,_setPrototypeOf2.default)(subClass,superClass):subClass.__proto__=superClass}},{"../core-js/object/create":27,"../core-js/object/set-prototype-of":29,"../helpers/typeof":39}],38:[function(_dereq_,module,exports){"use strict";exports.__esModule=true;var _typeof2=_dereq_("../helpers/typeof");var _typeof3=_interopRequireDefault(_typeof2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":(0,_typeof3.default)(call))==="object"||typeof call==="function")?call:self}},{"../helpers/typeof":39}],39:[function(_dereq_,module,exports){"use strict";exports.__esModule=true;var _iterator=_dereq_("../core-js/symbol/iterator");var _iterator2=_interopRequireDefault(_iterator);var _symbol=_dereq_("../core-js/symbol");var _symbol2=_interopRequireDefault(_symbol);var _typeof=typeof _symbol2.default==="function"&&typeof _iterator2.default==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof _symbol2.default==="function"&&obj.constructor===_symbol2.default&&obj!==_symbol2.default.prototype?"symbol":typeof obj};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=typeof _symbol2.default==="function"&&_typeof(_iterator2.default)==="symbol"?function(obj){return typeof obj==="undefined"?"undefined":_typeof(obj)}:function(obj){return obj&&typeof _symbol2.default==="function"&&obj.constructor===_symbol2.default&&obj!==_symbol2.default.prototype?"symbol":typeof obj==="undefined"?"undefined":_typeof(obj)}},{"../core-js/symbol":31,"../core-js/symbol/iterator":32}],40:[function(_dereq_,module,exports){module.exports=_dereq_("regenerator-runtime")},{"regenerator-runtime":137}],41:[function(_dereq_,module,exports){_dereq_("../../modules/es6.object.assign");module.exports=_dereq_("../../modules/_core").Object.assign},{"../../modules/_core":55,"../../modules/es6.object.assign":120}],42:[function(_dereq_,module,exports){_dereq_("../../modules/es6.object.create");var $Object=_dereq_("../../modules/_core").Object;module.exports=function create(P,D){return $Object.create(P,D)}},{"../../modules/_core":55,"../../modules/es6.object.create":121}],43:[function(_dereq_,module,exports){_dereq_("../../modules/es6.object.define-property");var $Object=_dereq_("../../modules/_core").Object;module.exports=function defineProperty(it,key,desc){return $Object.defineProperty(it,key,desc)}},{"../../modules/_core":55,"../../modules/es6.object.define-property":122}],44:[function(_dereq_,module,exports){_dereq_("../../modules/es6.object.set-prototype-of");module.exports=_dereq_("../../modules/_core").Object.setPrototypeOf},{"../../modules/_core":55,"../../modules/es6.object.set-prototype-of":123}],45:[function(_dereq_,module,exports){_dereq_("../modules/es6.object.to-string");_dereq_("../modules/es6.string.iterator");_dereq_("../modules/web.dom.iterable");_dereq_("../modules/es6.promise");module.exports=_dereq_("../modules/_core").Promise},{"../modules/_core":55,"../modules/es6.object.to-string":124,"../modules/es6.promise":125,"../modules/es6.string.iterator":126,"../modules/web.dom.iterable":130}],46:[function(_dereq_,module,exports){_dereq_("../../modules/es6.symbol");_dereq_("../../modules/es6.object.to-string");_dereq_("../../modules/es7.symbol.async-iterator");_dereq_("../../modules/es7.symbol.observable");module.exports=_dereq_("../../modules/_core").Symbol},{"../../modules/_core":55,"../../modules/es6.object.to-string":124,"../../modules/es6.symbol":127,"../../modules/es7.symbol.async-iterator":128,"../../modules/es7.symbol.observable":129}],47:[function(_dereq_,module,exports){_dereq_("../../modules/es6.string.iterator");_dereq_("../../modules/web.dom.iterable");module.exports=_dereq_("../../modules/_wks-ext").f("iterator")},{"../../modules/_wks-ext":116,"../../modules/es6.string.iterator":126,"../../modules/web.dom.iterable":130}],48:[function(_dereq_,module,exports){module.exports=function(it){if(typeof it!="function")throw TypeError(it+" is not a function!");return it}},{}],49:[function(_dereq_,module,exports){module.exports=function(){}},{}],50:[function(_dereq_,module,exports){module.exports=function(it,Constructor,name,forbiddenField){if(!(it instanceof Constructor)||forbiddenField!==undefined&&forbiddenField in it){throw TypeError(name+": incorrect invocation!")}return it}},{}],51:[function(_dereq_,module,exports){var isObject=_dereq_("./_is-object");module.exports=function(it){if(!isObject(it))throw TypeError(it+" is not an object!");return it}},{"./_is-object":74}],52:[function(_dereq_,module,exports){var toIObject=_dereq_("./_to-iobject"),toLength=_dereq_("./_to-length"),toIndex=_dereq_("./_to-index");module.exports=function(IS_INCLUDES){return function($this,el,fromIndex){var O=toIObject($this),length=toLength(O.length),index=toIndex(fromIndex,length),value;if(IS_INCLUDES&&el!=el)while(length>index){value=O[index++];if(value!=value)return true}else for(;length>index;index++)if(IS_INCLUDES||index in O){if(O[index]===el)return IS_INCLUDES||index||0}return!IS_INCLUDES&&-1}}},{"./_to-index":108,"./_to-iobject":110,"./_to-length":111}],53:[function(_dereq_,module,exports){var cof=_dereq_("./_cof"),TAG=_dereq_("./_wks")("toStringTag"),ARG=cof(function(){return arguments}())=="Arguments";var tryGet=function(it,key){try{return it[key]}catch(e){}};module.exports=function(it){var O,T,B;return it===undefined?"Undefined":it===null?"Null":typeof(T=tryGet(O=Object(it),TAG))=="string"?T:ARG?cof(O):(B=cof(O))=="Object"&&typeof O.callee=="function"?"Arguments":B}},{"./_cof":54,"./_wks":117}],54:[function(_dereq_,module,exports){var toString={}.toString;module.exports=function(it){return toString.call(it).slice(8,-1)}},{}],55:[function(_dereq_,module,exports){var core=module.exports={version:"2.4.0"};if(typeof __e=="number")__e=core},{}],56:[function(_dereq_,module,exports){var aFunction=_dereq_("./_a-function");module.exports=function(fn,that,length){aFunction(fn);if(that===undefined)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},{"./_a-function":48}],57:[function(_dereq_,module,exports){module.exports=function(it){if(it==undefined)throw TypeError("Can't call method on  "+it);return it}},{}],58:[function(_dereq_,module,exports){module.exports=!_dereq_("./_fails")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},{"./_fails":63}],59:[function(_dereq_,module,exports){var isObject=_dereq_("./_is-object"),document=_dereq_("./_global").document,is=isObject(document)&&isObject(document.createElement);module.exports=function(it){return is?document.createElement(it):{}}},{"./_global":65,"./_is-object":74}],60:[function(_dereq_,module,exports){module.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],61:[function(_dereq_,module,exports){var getKeys=_dereq_("./_object-keys"),gOPS=_dereq_("./_object-gops"),pIE=_dereq_("./_object-pie");module.exports=function(it){var result=getKeys(it),getSymbols=gOPS.f;if(getSymbols){var symbols=getSymbols(it),isEnum=pIE.f,i=0,key;while(symbols.length>i)if(isEnum.call(it,key=symbols[i++]))result.push(key)}return result}},{"./_object-gops":92,"./_object-keys":95,"./_object-pie":96}],62:[function(_dereq_,module,exports){var global=_dereq_("./_global"),core=_dereq_("./_core"),ctx=_dereq_("./_ctx"),hide=_dereq_("./_hide"),PROTOTYPE="prototype";var $export=function(type,name,source){var IS_FORCED=type&$export.F,IS_GLOBAL=type&$export.G,IS_STATIC=type&$export.S,IS_PROTO=type&$export.P,IS_BIND=type&$export.B,IS_WRAP=type&$export.W,exports=IS_GLOBAL?core:core[name]||(core[name]={}),expProto=exports[PROTOTYPE],target=IS_GLOBAL?global:IS_STATIC?global[name]:(global[name]||{})[PROTOTYPE],key,own,out;if(IS_GLOBAL)source=name;for(key in source){own=!IS_FORCED&&target&&target[key]!==undefined;if(own&&key in exports)continue;out=own?target[key]:source[key];exports[key]=IS_GLOBAL&&typeof target[key]!="function"?source[key]:IS_BIND&&own?ctx(out,global):IS_WRAP&&target[key]==out?function(C){var F=function(a,b,c){if(this instanceof C){switch(arguments.length){case 0:return new C;case 1:return new C(a);case 2:return new C(a,b)}return new C(a,b,c)}return C.apply(this,arguments)};F[PROTOTYPE]=C[PROTOTYPE];return F}(out):IS_PROTO&&typeof out=="function"?ctx(Function.call,out):out;if(IS_PROTO){(exports.virtual||(exports.virtual={}))[key]=out;if(type&$export.R&&expProto&&!expProto[key])hide(expProto,key,out)}}};$export.F=1;$export.G=2;$export.S=4;$export.P=8;$export.B=16;$export.W=32;$export.U=64;$export.R=128;module.exports=$export},{"./_core":55,"./_ctx":56,"./_global":65,"./_hide":67}],63:[function(_dereq_,module,exports){module.exports=function(exec){try{return!!exec()}catch(e){return true}}},{}],64:[function(_dereq_,module,exports){var ctx=_dereq_("./_ctx"),call=_dereq_("./_iter-call"),isArrayIter=_dereq_("./_is-array-iter"),anObject=_dereq_("./_an-object"),toLength=_dereq_("./_to-length"),getIterFn=_dereq_("./core.get-iterator-method"),BREAK={},RETURN={};var exports=module.exports=function(iterable,entries,fn,that,ITERATOR){var iterFn=ITERATOR?function(){return iterable}:getIterFn(iterable),f=ctx(fn,that,entries?2:1),index=0,length,step,iterator,result;if(typeof iterFn!="function")throw TypeError(iterable+" is not iterable!");if(isArrayIter(iterFn))for(length=toLength(iterable.length);length>index;index++){result=entries?f(anObject(step=iterable[index])[0],step[1]):f(iterable[index]);if(result===BREAK||result===RETURN)return result}else for(iterator=iterFn.call(iterable);!(step=iterator.next()).done;){result=call(iterator,f,step.value,entries);if(result===BREAK||result===RETURN)return result}};exports.BREAK=BREAK;exports.RETURN=RETURN},{"./_an-object":51,"./_ctx":56,"./_is-array-iter":72,"./_iter-call":75,"./_to-length":111,"./core.get-iterator-method":118}],65:[function(_dereq_,module,exports){var global=module.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();if(typeof __g=="number")__g=global},{}],66:[function(_dereq_,module,exports){var hasOwnProperty={}.hasOwnProperty;module.exports=function(it,key){return hasOwnProperty.call(it,key)}},{}],67:[function(_dereq_,module,exports){var dP=_dereq_("./_object-dp"),createDesc=_dereq_("./_property-desc");module.exports=_dereq_("./_descriptors")?function(object,key,value){return dP.f(object,key,createDesc(1,value))}:function(object,key,value){object[key]=value;return object}},{"./_descriptors":58,"./_object-dp":87,"./_property-desc":97}],68:[function(_dereq_,module,exports){module.exports=_dereq_("./_global").document&&document.documentElement},{"./_global":65}],69:[function(_dereq_,module,exports){module.exports=!_dereq_("./_descriptors")&&!_dereq_("./_fails")(function(){return Object.defineProperty(_dereq_("./_dom-create")("div"),"a",{get:function(){return 7}}).a!=7})},{"./_descriptors":58,"./_dom-create":59,"./_fails":63}],70:[function(_dereq_,module,exports){module.exports=function(fn,args,that){var un=that===undefined;switch(args.length){case 0:return un?fn():fn.call(that);case 1:return un?fn(args[0]):fn.call(that,args[0]);case 2:return un?fn(args[0],args[1]):fn.call(that,args[0],args[1]);case 3:return un?fn(args[0],args[1],args[2]):fn.call(that,args[0],args[1],args[2]);case 4:return un?fn(args[0],args[1],args[2],args[3]):fn.call(that,args[0],args[1],args[2],args[3])}return fn.apply(that,args)}},{}],71:[function(_dereq_,module,exports){var cof=_dereq_("./_cof");module.exports=Object("z").propertyIsEnumerable(0)?Object:function(it){return cof(it)=="String"?it.split(""):Object(it)}},{"./_cof":54}],72:[function(_dereq_,module,exports){var Iterators=_dereq_("./_iterators"),ITERATOR=_dereq_("./_wks")("iterator"),ArrayProto=Array.prototype;module.exports=function(it){return it!==undefined&&(Iterators.Array===it||ArrayProto[ITERATOR]===it)}},{"./_iterators":80,"./_wks":117}],73:[function(_dereq_,module,exports){var cof=_dereq_("./_cof");module.exports=Array.isArray||function isArray(arg){return cof(arg)=="Array"}},{"./_cof":54}],74:[function(_dereq_,module,exports){module.exports=function(it){return typeof it==="object"?it!==null:typeof it==="function"}},{}],75:[function(_dereq_,module,exports){var anObject=_dereq_("./_an-object");module.exports=function(iterator,fn,value,entries){try{return entries?fn(anObject(value)[0],value[1]):fn(value)}catch(e){var ret=iterator["return"];if(ret!==undefined)anObject(ret.call(iterator));throw e}}},{"./_an-object":51}],76:[function(_dereq_,module,exports){"use strict";var create=_dereq_("./_object-create"),descriptor=_dereq_("./_property-desc"),setToStringTag=_dereq_("./_set-to-string-tag"),IteratorPrototype={};_dereq_("./_hide")(IteratorPrototype,_dereq_("./_wks")("iterator"),function(){return this});module.exports=function(Constructor,NAME,next){Constructor.prototype=create(IteratorPrototype,{next:descriptor(1,next)});setToStringTag(Constructor,NAME+" Iterator")}},{"./_hide":67,"./_object-create":86,"./_property-desc":97,"./_set-to-string-tag":102,"./_wks":117}],77:[function(_dereq_,module,exports){"use strict";var LIBRARY=_dereq_("./_library"),$export=_dereq_("./_export"),redefine=_dereq_("./_redefine"),hide=_dereq_("./_hide"),has=_dereq_("./_has"),Iterators=_dereq_("./_iterators"),$iterCreate=_dereq_("./_iter-create"),setToStringTag=_dereq_("./_set-to-string-tag"),getPrototypeOf=_dereq_("./_object-gpo"),ITERATOR=_dereq_("./_wks")("iterator"),BUGGY=!([].keys&&"next"in[].keys()),FF_ITERATOR="@@iterator",KEYS="keys",VALUES="values";var returnThis=function(){return this};module.exports=function(Base,NAME,Constructor,next,DEFAULT,IS_SET,FORCED){$iterCreate(Constructor,NAME,next);var getMethod=function(kind){if(!BUGGY&&kind in proto)return proto[kind];switch(kind){case KEYS:return function keys(){return new Constructor(this,kind)};case VALUES:return function values(){return new Constructor(this,kind)}}return function entries(){return new Constructor(this,kind)}};var TAG=NAME+" Iterator",DEF_VALUES=DEFAULT==VALUES,VALUES_BUG=false,proto=Base.prototype,$native=proto[ITERATOR]||proto[FF_ITERATOR]||DEFAULT&&proto[DEFAULT],$default=$native||getMethod(DEFAULT),$entries=DEFAULT?!DEF_VALUES?$default:getMethod("entries"):undefined,$anyNative=NAME=="Array"?proto.entries||$native:$native,methods,key,IteratorPrototype;if($anyNative){IteratorPrototype=getPrototypeOf($anyNative.call(new Base));if(IteratorPrototype!==Object.prototype){setToStringTag(IteratorPrototype,TAG,true);if(!LIBRARY&&!has(IteratorPrototype,ITERATOR))hide(IteratorPrototype,ITERATOR,returnThis)}}if(DEF_VALUES&&$native&&$native.name!==VALUES){VALUES_BUG=true;$default=function values(){return $native.call(this)}}if((!LIBRARY||FORCED)&&(BUGGY||VALUES_BUG||!proto[ITERATOR])){hide(proto,ITERATOR,$default)}Iterators[NAME]=$default;Iterators[TAG]=returnThis;if(DEFAULT){methods={values:DEF_VALUES?$default:getMethod(VALUES),keys:IS_SET?$default:getMethod(KEYS),entries:$entries};if(FORCED)for(key in methods){if(!(key in proto))redefine(proto,key,methods[key])}else $export($export.P+$export.F*(BUGGY||VALUES_BUG),NAME,methods)}return methods}},{"./_export":62,"./_has":66,"./_hide":67,"./_iter-create":76,"./_iterators":80,"./_library":82,"./_object-gpo":93,"./_redefine":99,"./_set-to-string-tag":102,"./_wks":117}],78:[function(_dereq_,module,exports){var ITERATOR=_dereq_("./_wks")("iterator"),SAFE_CLOSING=false;try{var riter=[7][ITERATOR]();riter["return"]=function(){SAFE_CLOSING=true};Array.from(riter,function(){throw 2})}catch(e){}module.exports=function(exec,skipClosing){if(!skipClosing&&!SAFE_CLOSING)return false;var safe=false;try{var arr=[7],iter=arr[ITERATOR]();iter.next=function(){return{done:safe=true}};arr[ITERATOR]=function(){return iter};exec(arr)}catch(e){}return safe}},{"./_wks":117}],79:[function(_dereq_,module,exports){module.exports=function(done,value){return{value:value,done:!!done}}},{}],80:[function(_dereq_,module,exports){module.exports={}},{}],81:[function(_dereq_,module,exports){var getKeys=_dereq_("./_object-keys"),toIObject=_dereq_("./_to-iobject");module.exports=function(object,el){var O=toIObject(object),keys=getKeys(O),length=keys.length,index=0,key;while(length>index)if(O[key=keys[index++]]===el)return key}},{"./_object-keys":95,"./_to-iobject":110}],82:[function(_dereq_,module,exports){module.exports=true},{}],83:[function(_dereq_,module,exports){var META=_dereq_("./_uid")("meta"),isObject=_dereq_("./_is-object"),has=_dereq_("./_has"),setDesc=_dereq_("./_object-dp").f,id=0;var isExtensible=Object.isExtensible||function(){return true};var FREEZE=!_dereq_("./_fails")(function(){return isExtensible(Object.preventExtensions({}))});var setMeta=function(it){setDesc(it,META,{value:{i:"O"+ ++id,w:{}}})};var fastKey=function(it,create){if(!isObject(it))return typeof it=="symbol"?it:(typeof it=="string"?"S":"P")+it;if(!has(it,META)){if(!isExtensible(it))return"F";if(!create)return"E";setMeta(it)}return it[META].i};var getWeak=function(it,create){if(!has(it,META)){if(!isExtensible(it))return true;if(!create)return false;setMeta(it)}return it[META].w};var onFreeze=function(it){if(FREEZE&&meta.NEED&&isExtensible(it)&&!has(it,META))setMeta(it);return it};var meta=module.exports={KEY:META,NEED:false,fastKey:fastKey,getWeak:getWeak,onFreeze:onFreeze}},{"./_fails":63,"./_has":66,"./_is-object":74,"./_object-dp":87,"./_uid":114}],84:[function(_dereq_,module,exports){var global=_dereq_("./_global"),macrotask=_dereq_("./_task").set,Observer=global.MutationObserver||global.WebKitMutationObserver,process=global.process,Promise=global.Promise,isNode=_dereq_("./_cof")(process)=="process";module.exports=function(){var head,last,notify;var flush=function(){var parent,fn;if(isNode&&(parent=process.domain))parent.exit();while(head){fn=head.fn;head=head.next;try{fn()}catch(e){if(head)notify();else last=undefined;throw e}}last=undefined;if(parent)parent.enter()};if(isNode){notify=function(){process.nextTick(flush)}}else if(Observer){var toggle=true,node=document.createTextNode("");new Observer(flush).observe(node,{characterData:true});notify=function(){node.data=toggle=!toggle}}else if(Promise&&Promise.resolve){var promise=Promise.resolve();notify=function(){promise.then(flush)}}else{notify=function(){macrotask.call(global,flush)}}return function(fn){var task={fn:fn,next:undefined};if(last)last.next=task;if(!head){head=task;notify()}last=task}}},{"./_cof":54,"./_global":65,"./_task":107}],85:[function(_dereq_,module,exports){"use strict";var getKeys=_dereq_("./_object-keys"),gOPS=_dereq_("./_object-gops"),pIE=_dereq_("./_object-pie"),toObject=_dereq_("./_to-object"),IObject=_dereq_("./_iobject"),$assign=Object.assign;module.exports=!$assign||_dereq_("./_fails")(function(){var A={},B={},S=Symbol(),K="abcdefghijklmnopqrst";A[S]=7;K.split("").forEach(function(k){B[k]=k});return $assign({},A)[S]!=7||Object.keys($assign({},B)).join("")!=K})?function assign(target,source){var T=toObject(target),aLen=arguments.length,index=1,getSymbols=gOPS.f,isEnum=pIE.f;while(aLen>index){var S=IObject(arguments[index++]),keys=getSymbols?getKeys(S).concat(getSymbols(S)):getKeys(S),length=keys.length,j=0,key;while(length>j)if(isEnum.call(S,key=keys[j++]))T[key]=S[key]}return T}:$assign},{"./_fails":63,"./_iobject":71,"./_object-gops":92,"./_object-keys":95,"./_object-pie":96,"./_to-object":112}],86:[function(_dereq_,module,exports){var anObject=_dereq_("./_an-object"),dPs=_dereq_("./_object-dps"),enumBugKeys=_dereq_("./_enum-bug-keys"),IE_PROTO=_dereq_("./_shared-key")("IE_PROTO"),Empty=function(){},PROTOTYPE="prototype";var createDict=function(){var iframe=_dereq_("./_dom-create")("iframe"),i=enumBugKeys.length,lt="<",gt=">",iframeDocument;iframe.style.display="none";_dereq_("./_html").appendChild(iframe);iframe.src="javascript:";iframeDocument=iframe.contentWindow.document;iframeDocument.open();iframeDocument.write(lt+"script"+gt+"document.F=Object"+lt+"/script"+gt);iframeDocument.close();createDict=iframeDocument.F;while(i--)delete createDict[PROTOTYPE][enumBugKeys[i]];return createDict()};module.exports=Object.create||function create(O,Properties){var result;if(O!==null){Empty[PROTOTYPE]=anObject(O);result=new Empty;Empty[PROTOTYPE]=null;result[IE_PROTO]=O}else result=createDict();return Properties===undefined?result:dPs(result,Properties)}},{"./_an-object":51,"./_dom-create":59,"./_enum-bug-keys":60,"./_html":68,"./_object-dps":88,"./_shared-key":103}],87:[function(_dereq_,module,exports){var anObject=_dereq_("./_an-object"),IE8_DOM_DEFINE=_dereq_("./_ie8-dom-define"),toPrimitive=_dereq_("./_to-primitive"),dP=Object.defineProperty;exports.f=_dereq_("./_descriptors")?Object.defineProperty:function defineProperty(O,P,Attributes){anObject(O);P=toPrimitive(P,true);anObject(Attributes);if(IE8_DOM_DEFINE)try{return dP(O,P,Attributes)}catch(e){}if("get"in Attributes||"set"in Attributes)throw TypeError("Accessors not supported!");if("value"in Attributes)O[P]=Attributes.value;return O}},{"./_an-object":51,"./_descriptors":58,"./_ie8-dom-define":69,"./_to-primitive":113}],88:[function(_dereq_,module,exports){var dP=_dereq_("./_object-dp"),anObject=_dereq_("./_an-object"),getKeys=_dereq_("./_object-keys");module.exports=_dereq_("./_descriptors")?Object.defineProperties:function defineProperties(O,Properties){anObject(O);var keys=getKeys(Properties),length=keys.length,i=0,P;while(length>i)dP.f(O,P=keys[i++],Properties[P]);return O}},{"./_an-object":51,"./_descriptors":58,"./_object-dp":87,"./_object-keys":95}],89:[function(_dereq_,module,exports){var pIE=_dereq_("./_object-pie"),createDesc=_dereq_("./_property-desc"),toIObject=_dereq_("./_to-iobject"),toPrimitive=_dereq_("./_to-primitive"),has=_dereq_("./_has"),IE8_DOM_DEFINE=_dereq_("./_ie8-dom-define"),gOPD=Object.getOwnPropertyDescriptor;exports.f=_dereq_("./_descriptors")?gOPD:function getOwnPropertyDescriptor(O,P){O=toIObject(O);P=toPrimitive(P,true);if(IE8_DOM_DEFINE)try{return gOPD(O,P)}catch(e){}if(has(O,P))return createDesc(!pIE.f.call(O,P),O[P])}},{"./_descriptors":58,"./_has":66,"./_ie8-dom-define":69,"./_object-pie":96,"./_property-desc":97,"./_to-iobject":110,"./_to-primitive":113}],90:[function(_dereq_,module,exports){var toIObject=_dereq_("./_to-iobject"),gOPN=_dereq_("./_object-gopn").f,toString={}.toString;var windowNames=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var getWindowNames=function(it){try{return gOPN(it)}catch(e){return windowNames.slice()}};module.exports.f=function getOwnPropertyNames(it){return windowNames&&toString.call(it)=="[object Window]"?getWindowNames(it):gOPN(toIObject(it))}},{"./_object-gopn":91,"./_to-iobject":110}],91:[function(_dereq_,module,exports){var $keys=_dereq_("./_object-keys-internal"),hiddenKeys=_dereq_("./_enum-bug-keys").concat("length","prototype");exports.f=Object.getOwnPropertyNames||function getOwnPropertyNames(O){return $keys(O,hiddenKeys)}},{"./_enum-bug-keys":60,"./_object-keys-internal":94}],92:[function(_dereq_,module,exports){exports.f=Object.getOwnPropertySymbols},{}],93:[function(_dereq_,module,exports){var has=_dereq_("./_has"),toObject=_dereq_("./_to-object"),IE_PROTO=_dereq_("./_shared-key")("IE_PROTO"),ObjectProto=Object.prototype;module.exports=Object.getPrototypeOf||function(O){O=toObject(O);if(has(O,IE_PROTO))return O[IE_PROTO];if(typeof O.constructor=="function"&&O instanceof O.constructor){return O.constructor.prototype}return O instanceof Object?ObjectProto:null}},{"./_has":66,"./_shared-key":103,"./_to-object":112}],94:[function(_dereq_,module,exports){var has=_dereq_("./_has"),toIObject=_dereq_("./_to-iobject"),arrayIndexOf=_dereq_("./_array-includes")(false),IE_PROTO=_dereq_("./_shared-key")("IE_PROTO");module.exports=function(object,names){var O=toIObject(object),i=0,result=[],key;for(key in O)if(key!=IE_PROTO)has(O,key)&&result.push(key);while(names.length>i)if(has(O,key=names[i++])){~arrayIndexOf(result,key)||result.push(key)}return result}},{"./_array-includes":52,"./_has":66,"./_shared-key":103,"./_to-iobject":110}],95:[function(_dereq_,module,exports){var $keys=_dereq_("./_object-keys-internal"),enumBugKeys=_dereq_("./_enum-bug-keys");module.exports=Object.keys||function keys(O){return $keys(O,enumBugKeys)}},{"./_enum-bug-keys":60,"./_object-keys-internal":94}],96:[function(_dereq_,module,exports){exports.f={}.propertyIsEnumerable},{}],97:[function(_dereq_,module,exports){module.exports=function(bitmap,value){return{enumerable:!(bitmap&1),configurable:!(bitmap&2),writable:!(bitmap&4),value:value}}},{}],98:[function(_dereq_,module,exports){var hide=_dereq_("./_hide");module.exports=function(target,src,safe){for(var key in src){if(safe&&target[key])target[key]=src[key];else hide(target,key,src[key])}return target}},{"./_hide":67}],99:[function(_dereq_,module,exports){module.exports=_dereq_("./_hide")},{"./_hide":67}],100:[function(_dereq_,module,exports){var isObject=_dereq_("./_is-object"),anObject=_dereq_("./_an-object");var check=function(O,proto){anObject(O);if(!isObject(proto)&&proto!==null)throw TypeError(proto+": can't set as prototype!")};module.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(test,buggy,set){try{set=_dereq_("./_ctx")(Function.call,_dereq_("./_object-gopd").f(Object.prototype,"__proto__").set,2);set(test,[]);buggy=!(test instanceof Array)}catch(e){buggy=true}return function setPrototypeOf(O,proto){check(O,proto);if(buggy)O.__proto__=proto;else set(O,proto);return O}}({},false):undefined),check:check}},{"./_an-object":51,"./_ctx":56,"./_is-object":74,"./_object-gopd":89}],101:[function(_dereq_,module,exports){"use strict";var global=_dereq_("./_global"),core=_dereq_("./_core"),dP=_dereq_("./_object-dp"),DESCRIPTORS=_dereq_("./_descriptors"),SPECIES=_dereq_("./_wks")("species");module.exports=function(KEY){var C=typeof core[KEY]=="function"?core[KEY]:global[KEY];if(DESCRIPTORS&&C&&!C[SPECIES])dP.f(C,SPECIES,{configurable:true,get:function(){return this}})}},{"./_core":55,"./_descriptors":58,"./_global":65,"./_object-dp":87,"./_wks":117}],102:[function(_dereq_,module,exports){var def=_dereq_("./_object-dp").f,has=_dereq_("./_has"),TAG=_dereq_("./_wks")("toStringTag");module.exports=function(it,tag,stat){if(it&&!has(it=stat?it:it.prototype,TAG))def(it,TAG,{configurable:true,value:tag})}},{"./_has":66,"./_object-dp":87,"./_wks":117}],103:[function(_dereq_,module,exports){var shared=_dereq_("./_shared")("keys"),uid=_dereq_("./_uid");module.exports=function(key){return shared[key]||(shared[key]=uid(key))}},{"./_shared":104,"./_uid":114}],104:[function(_dereq_,module,exports){var global=_dereq_("./_global"),SHARED="__core-js_shared__",store=global[SHARED]||(global[SHARED]={});module.exports=function(key){return store[key]||(store[key]={})}},{"./_global":65}],105:[function(_dereq_,module,exports){var anObject=_dereq_("./_an-object"),aFunction=_dereq_("./_a-function"),SPECIES=_dereq_("./_wks")("species");module.exports=function(O,D){var C=anObject(O).constructor,S;return C===undefined||(S=anObject(C)[SPECIES])==undefined?D:aFunction(S)}},{"./_a-function":48,"./_an-object":51,"./_wks":117}],106:[function(_dereq_,module,exports){var toInteger=_dereq_("./_to-integer"),defined=_dereq_("./_defined");module.exports=function(TO_STRING){return function(that,pos){var s=String(defined(that)),i=toInteger(pos),l=s.length,a,b;if(i<0||i>=l)return TO_STRING?"":undefined;a=s.charCodeAt(i);return a<55296||a>56319||i+1===l||(b=s.charCodeAt(i+1))<56320||b>57343?TO_STRING?s.charAt(i):a:TO_STRING?s.slice(i,i+2):(a-55296<<10)+(b-56320)+65536}}},{"./_defined":57,"./_to-integer":109}],107:[function(_dereq_,module,exports){var ctx=_dereq_("./_ctx"),invoke=_dereq_("./_invoke"),html=_dereq_("./_html"),cel=_dereq_("./_dom-create"),global=_dereq_("./_global"),process=global.process,setTask=global.setImmediate,clearTask=global.clearImmediate,MessageChannel=global.MessageChannel,counter=0,queue={},ONREADYSTATECHANGE="onreadystatechange",defer,channel,port;var run=function(){var id=+this;if(queue.hasOwnProperty(id)){var fn=queue[id];delete queue[id];fn()}};var listener=function(event){run.call(event.data)};if(!setTask||!clearTask){setTask=function setImmediate(fn){var args=[],i=1;while(arguments.length>i)args.push(arguments[i++]);queue[++counter]=function(){invoke(typeof fn=="function"?fn:Function(fn),args)};defer(counter);return counter};clearTask=function clearImmediate(id){delete queue[id]};if(_dereq_("./_cof")(process)=="process"){defer=function(id){process.nextTick(ctx(run,id,1))}}else if(MessageChannel){channel=new MessageChannel;port=channel.port2;channel.port1.onmessage=listener;defer=ctx(port.postMessage,port,1)}else if(global.addEventListener&&typeof postMessage=="function"&&!global.importScripts){defer=function(id){global.postMessage(id+"","*")};global.addEventListener("message",listener,false)}else if(ONREADYSTATECHANGE in cel("script")){defer=function(id){html.appendChild(cel("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this);run.call(id)}}}else{defer=function(id){setTimeout(ctx(run,id,1),0)}}}module.exports={set:setTask,clear:clearTask}},{"./_cof":54,"./_ctx":56,"./_dom-create":59,"./_global":65,"./_html":68,"./_invoke":70}],108:[function(_dereq_,module,exports){var toInteger=_dereq_("./_to-integer"),max=Math.max,min=Math.min;module.exports=function(index,length){index=toInteger(index);return index<0?max(index+length,0):min(index,length)}},{"./_to-integer":109}],109:[function(_dereq_,module,exports){var ceil=Math.ceil,floor=Math.floor;module.exports=function(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it)}},{}],110:[function(_dereq_,module,exports){var IObject=_dereq_("./_iobject"),defined=_dereq_("./_defined");module.exports=function(it){return IObject(defined(it))}},{"./_defined":57,"./_iobject":71}],111:[function(_dereq_,module,exports){var toInteger=_dereq_("./_to-integer"),min=Math.min;module.exports=function(it){return it>0?min(toInteger(it),9007199254740991):0}},{"./_to-integer":109}],112:[function(_dereq_,module,exports){var defined=_dereq_("./_defined");module.exports=function(it){return Object(defined(it))}},{"./_defined":57}],113:[function(_dereq_,module,exports){var isObject=_dereq_("./_is-object");module.exports=function(it,S){if(!isObject(it))return it;var fn,val;if(S&&typeof(fn=it.toString)=="function"&&!isObject(val=fn.call(it)))return val;if(typeof(fn=it.valueOf)=="function"&&!isObject(val=fn.call(it)))return val;if(!S&&typeof(fn=it.toString)=="function"&&!isObject(val=fn.call(it)))return val;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":74}],114:[function(_dereq_,module,exports){var id=0,px=Math.random();module.exports=function(key){return"Symbol(".concat(key===undefined?"":key,")_",(++id+px).toString(36))}},{}],115:[function(_dereq_,module,exports){var global=_dereq_("./_global"),core=_dereq_("./_core"),LIBRARY=_dereq_("./_library"),wksExt=_dereq_("./_wks-ext"),defineProperty=_dereq_("./_object-dp").f;module.exports=function(name){var $Symbol=core.Symbol||(core.Symbol=LIBRARY?{}:global.Symbol||{});if(name.charAt(0)!="_"&&!(name in $Symbol))defineProperty($Symbol,name,{value:wksExt.f(name)})}},{"./_core":55,"./_global":65,"./_library":82,"./_object-dp":87,"./_wks-ext":116}],116:[function(_dereq_,module,exports){exports.f=_dereq_("./_wks")},{"./_wks":117}],117:[function(_dereq_,module,exports){var store=_dereq_("./_shared")("wks"),uid=_dereq_("./_uid"),Symbol=_dereq_("./_global").Symbol,USE_SYMBOL=typeof Symbol=="function";var $exports=module.exports=function(name){return store[name]||(store[name]=USE_SYMBOL&&Symbol[name]||(USE_SYMBOL?Symbol:uid)("Symbol."+name))};$exports.store=store},{"./_global":65,"./_shared":104,"./_uid":114}],118:[function(_dereq_,module,exports){var classof=_dereq_("./_classof"),ITERATOR=_dereq_("./_wks")("iterator"),Iterators=_dereq_("./_iterators");module.exports=_dereq_("./_core").getIteratorMethod=function(it){if(it!=undefined)return it[ITERATOR]||it["@@iterator"]||Iterators[classof(it)]}},{"./_classof":53,"./_core":55,"./_iterators":80,"./_wks":117}],119:[function(_dereq_,module,exports){"use strict";var addToUnscopables=_dereq_("./_add-to-unscopables"),step=_dereq_("./_iter-step"),Iterators=_dereq_("./_iterators"),toIObject=_dereq_("./_to-iobject");module.exports=_dereq_("./_iter-define")(Array,"Array",function(iterated,kind){this._t=toIObject(iterated);this._i=0;this._k=kind},function(){var O=this._t,kind=this._k,index=this._i++;if(!O||index>=O.length){this._t=undefined;return step(1)}if(kind=="keys")return step(0,index);if(kind=="values")return step(0,O[index]);return step(0,[index,O[index]])},"values");Iterators.Arguments=Iterators.Array;addToUnscopables("keys");addToUnscopables("values");addToUnscopables("entries")},{"./_add-to-unscopables":49,"./_iter-define":77,"./_iter-step":79,"./_iterators":80,"./_to-iobject":110}],120:[function(_dereq_,module,exports){var $export=_dereq_("./_export");$export($export.S+$export.F,"Object",{assign:_dereq_("./_object-assign")})},{"./_export":62,"./_object-assign":85}],121:[function(_dereq_,module,exports){var $export=_dereq_("./_export");$export($export.S,"Object",{create:_dereq_("./_object-create")})},{"./_export":62,"./_object-create":86}],122:[function(_dereq_,module,exports){var $export=_dereq_("./_export");$export($export.S+$export.F*!_dereq_("./_descriptors"),"Object",{defineProperty:_dereq_("./_object-dp").f})},{"./_descriptors":58,"./_export":62,"./_object-dp":87}],123:[function(_dereq_,module,exports){var $export=_dereq_("./_export");$export($export.S,"Object",{setPrototypeOf:_dereq_("./_set-proto").set})},{"./_export":62,"./_set-proto":100}],124:[function(_dereq_,module,exports){},{}],125:[function(_dereq_,module,exports){"use strict";var LIBRARY=_dereq_("./_library"),global=_dereq_("./_global"),ctx=_dereq_("./_ctx"),classof=_dereq_("./_classof"),$export=_dereq_("./_export"),isObject=_dereq_("./_is-object"),aFunction=_dereq_("./_a-function"),anInstance=_dereq_("./_an-instance"),forOf=_dereq_("./_for-of"),speciesConstructor=_dereq_("./_species-constructor"),task=_dereq_("./_task").set,microtask=_dereq_("./_microtask")(),PROMISE="Promise",TypeError=global.TypeError,process=global.process,$Promise=global[PROMISE],process=global.process,isNode=classof(process)=="process",empty=function(){},Internal,GenericPromiseCapability,Wrapper;var USE_NATIVE=!!function(){try{var promise=$Promise.resolve(1),FakePromise=(promise.constructor={})[_dereq_("./_wks")("species")]=function(exec){exec(empty,empty)};return(isNode||typeof PromiseRejectionEvent=="function")&&promise.then(empty)instanceof FakePromise}catch(e){}}();var sameConstructor=function(a,b){return a===b||a===$Promise&&b===Wrapper};var isThenable=function(it){var then;return isObject(it)&&typeof(then=it.then)=="function"?then:false};var newPromiseCapability=function(C){return sameConstructor($Promise,C)?new PromiseCapability(C):new GenericPromiseCapability(C)};var PromiseCapability=GenericPromiseCapability=function(C){var resolve,reject;this.promise=new C(function($$resolve,$$reject){if(resolve!==undefined||reject!==undefined)throw TypeError("Bad Promise constructor");resolve=$$resolve;reject=$$reject});this.resolve=aFunction(resolve);this.reject=aFunction(reject)};var perform=function(exec){try{exec()}catch(e){return{error:e}}};var notify=function(promise,isReject){if(promise._n)return;promise._n=true;var chain=promise._c;microtask(function(){var value=promise._v,ok=promise._s==1,i=0;var run=function(reaction){var handler=ok?reaction.ok:reaction.fail,resolve=reaction.resolve,reject=reaction.reject,domain=reaction.domain,result,then;try{if(handler){if(!ok){if(promise._h==2)onHandleUnhandled(promise);promise._h=1}if(handler===true)result=value;else{if(domain)domain.enter();result=handler(value);if(domain)domain.exit()}if(result===reaction.promise){reject(TypeError("Promise-chain cycle"))}else if(then=isThenable(result)){then.call(result,resolve,reject)}else resolve(result)}else reject(value)}catch(e){reject(e)}};while(chain.length>i)run(chain[i++]);promise._c=[];promise._n=false;if(isReject&&!promise._h)onUnhandled(promise)})};var onUnhandled=function(promise){task.call(global,function(){var value=promise._v,abrupt,handler,console;if(isUnhandled(promise)){abrupt=perform(function(){if(isNode){process.emit("unhandledRejection",value,promise)}else if(handler=global.onunhandledrejection){handler({promise:promise,reason:value})}else if((console=global.console)&&console.error){console.error("Unhandled promise rejection",value)}});promise._h=isNode||isUnhandled(promise)?2:1}promise._a=undefined;if(abrupt)throw abrupt.error})};var isUnhandled=function(promise){if(promise._h==1)return false;var chain=promise._a||promise._c,i=0,reaction;while(chain.length>i){reaction=chain[i++];if(reaction.fail||!isUnhandled(reaction.promise))return false}return true};var onHandleUnhandled=function(promise){task.call(global,function(){var handler;if(isNode){process.emit("rejectionHandled",promise)}else if(handler=global.onrejectionhandled){handler({promise:promise,reason:promise._v})}})};var $reject=function(value){var promise=this;if(promise._d)return;promise._d=true;promise=promise._w||promise;promise._v=value;promise._s=2;if(!promise._a)promise._a=promise._c.slice();notify(promise,true)};var $resolve=function(value){var promise=this,then;if(promise._d)return;promise._d=true;promise=promise._w||promise;try{if(promise===value)throw TypeError("Promise can't be resolved itself");if(then=isThenable(value)){microtask(function(){var wrapper={_w:promise,_d:false};try{then.call(value,ctx($resolve,wrapper,1),ctx($reject,wrapper,1))}catch(e){$reject.call(wrapper,e)}})}else{promise._v=value;promise._s=1;notify(promise,false)}}catch(e){$reject.call({_w:promise,_d:false},e)}};if(!USE_NATIVE){$Promise=function Promise(executor){anInstance(this,$Promise,PROMISE,"_h");aFunction(executor);Internal.call(this);try{executor(ctx($resolve,this,1),ctx($reject,this,1))}catch(err){$reject.call(this,err)}};Internal=function Promise(executor){this._c=[];this._a=undefined;this._s=0;this._d=false;this._v=undefined;this._h=0;this._n=false};Internal.prototype=_dereq_("./_redefine-all")($Promise.prototype,{then:function then(onFulfilled,onRejected){var reaction=newPromiseCapability(speciesConstructor(this,$Promise));reaction.ok=typeof onFulfilled=="function"?onFulfilled:true;reaction.fail=typeof onRejected=="function"&&onRejected;reaction.domain=isNode?process.domain:undefined;this._c.push(reaction);if(this._a)this._a.push(reaction);if(this._s)notify(this,false);return reaction.promise},catch:function(onRejected){return this.then(undefined,onRejected)}});PromiseCapability=function(){var promise=new Internal;this.promise=promise;this.resolve=ctx($resolve,promise,1);this.reject=ctx($reject,promise,1)}}$export($export.G+$export.W+$export.F*!USE_NATIVE,{Promise:$Promise});_dereq_("./_set-to-string-tag")($Promise,PROMISE);_dereq_("./_set-species")(PROMISE);Wrapper=_dereq_("./_core")[PROMISE];$export($export.S+$export.F*!USE_NATIVE,PROMISE,{reject:function reject(r){var capability=newPromiseCapability(this),$$reject=capability.reject;$$reject(r);return capability.promise}});$export($export.S+$export.F*(LIBRARY||!USE_NATIVE),PROMISE,{resolve:function resolve(x){if(x instanceof $Promise&&sameConstructor(x.constructor,this))return x;var capability=newPromiseCapability(this),$$resolve=capability.resolve;$$resolve(x);return capability.promise}});$export($export.S+$export.F*!(USE_NATIVE&&_dereq_("./_iter-detect")(function(iter){$Promise.all(iter)["catch"](empty)})),PROMISE,{all:function all(iterable){var C=this,capability=newPromiseCapability(C),resolve=capability.resolve,reject=capability.reject;var abrupt=perform(function(){var values=[],index=0,remaining=1;forOf(iterable,false,function(promise){var $index=index++,alreadyCalled=false;values.push(undefined);remaining++;C.resolve(promise).then(function(value){if(alreadyCalled)return;alreadyCalled=true;values[$index]=value;--remaining||resolve(values)},reject)});--remaining||resolve(values)});if(abrupt)reject(abrupt.error);return capability.promise},race:function race(iterable){var C=this,capability=newPromiseCapability(C),reject=capability.reject;var abrupt=perform(function(){forOf(iterable,false,function(promise){C.resolve(promise).then(capability.resolve,reject)})});if(abrupt)reject(abrupt.error);return capability.promise}})},{"./_a-function":48,"./_an-instance":50,"./_classof":53,"./_core":55,"./_ctx":56,"./_export":62,"./_for-of":64,"./_global":65,"./_is-object":74,"./_iter-detect":78,"./_library":82,"./_microtask":84,"./_redefine-all":98,"./_set-species":101,"./_set-to-string-tag":102,"./_species-constructor":105,"./_task":107,"./_wks":117}],126:[function(_dereq_,module,exports){"use strict";var $at=_dereq_("./_string-at")(true);_dereq_("./_iter-define")(String,"String",function(iterated){this._t=String(iterated);this._i=0},function(){var O=this._t,index=this._i,point;if(index>=O.length)return{value:undefined,done:true};point=$at(O,index);this._i+=point.length;return{value:point,done:false}})},{"./_iter-define":77,"./_string-at":106}],127:[function(_dereq_,module,exports){"use strict";var global=_dereq_("./_global"),has=_dereq_("./_has"),DESCRIPTORS=_dereq_("./_descriptors"),$export=_dereq_("./_export"),redefine=_dereq_("./_redefine"),META=_dereq_("./_meta").KEY,$fails=_dereq_("./_fails"),shared=_dereq_("./_shared"),setToStringTag=_dereq_("./_set-to-string-tag"),uid=_dereq_("./_uid"),wks=_dereq_("./_wks"),wksExt=_dereq_("./_wks-ext"),wksDefine=_dereq_("./_wks-define"),keyOf=_dereq_("./_keyof"),enumKeys=_dereq_("./_enum-keys"),isArray=_dereq_("./_is-array"),anObject=_dereq_("./_an-object"),toIObject=_dereq_("./_to-iobject"),toPrimitive=_dereq_("./_to-primitive"),createDesc=_dereq_("./_property-desc"),_create=_dereq_("./_object-create"),gOPNExt=_dereq_("./_object-gopn-ext"),$GOPD=_dereq_("./_object-gopd"),$DP=_dereq_("./_object-dp"),$keys=_dereq_("./_object-keys"),gOPD=$GOPD.f,dP=$DP.f,gOPN=gOPNExt.f,$Symbol=global.Symbol,$JSON=global.JSON,_stringify=$JSON&&$JSON.stringify,PROTOTYPE="prototype",HIDDEN=wks("_hidden"),TO_PRIMITIVE=wks("toPrimitive"),isEnum={}.propertyIsEnumerable,SymbolRegistry=shared("symbol-registry"),AllSymbols=shared("symbols"),OPSymbols=shared("op-symbols"),ObjectProto=Object[PROTOTYPE],USE_NATIVE=typeof $Symbol=="function",QObject=global.QObject;var setter=!QObject||!QObject[PROTOTYPE]||!QObject[PROTOTYPE].findChild;var setSymbolDesc=DESCRIPTORS&&$fails(function(){return _create(dP({},"a",{get:function(){return dP(this,"a",{value:7}).a}})).a!=7})?function(it,key,D){var protoDesc=gOPD(ObjectProto,key);if(protoDesc)delete ObjectProto[key];dP(it,key,D);if(protoDesc&&it!==ObjectProto)dP(ObjectProto,key,protoDesc)}:dP;var wrap=function(tag){var sym=AllSymbols[tag]=_create($Symbol[PROTOTYPE]);sym._k=tag;return sym};var isSymbol=USE_NATIVE&&typeof $Symbol.iterator=="symbol"?function(it){return typeof it=="symbol"}:function(it){return it instanceof $Symbol};var $defineProperty=function defineProperty(it,key,D){if(it===ObjectProto)$defineProperty(OPSymbols,key,D);anObject(it);key=toPrimitive(key,true);anObject(D);if(has(AllSymbols,key)){if(!D.enumerable){if(!has(it,HIDDEN))dP(it,HIDDEN,createDesc(1,{}));it[HIDDEN][key]=true}else{if(has(it,HIDDEN)&&it[HIDDEN][key])it[HIDDEN][key]=false;D=_create(D,{enumerable:createDesc(0,false)})}return setSymbolDesc(it,key,D)}return dP(it,key,D)};var $defineProperties=function defineProperties(it,P){anObject(it);var keys=enumKeys(P=toIObject(P)),i=0,l=keys.length,key;while(l>i)$defineProperty(it,key=keys[i++],P[key]);return it};var $create=function create(it,P){return P===undefined?_create(it):$defineProperties(_create(it),P)};var $propertyIsEnumerable=function propertyIsEnumerable(key){var E=isEnum.call(this,key=toPrimitive(key,true));if(this===ObjectProto&&has(AllSymbols,key)&&!has(OPSymbols,key))return false;return E||!has(this,key)||!has(AllSymbols,key)||has(this,HIDDEN)&&this[HIDDEN][key]?E:true};var $getOwnPropertyDescriptor=function getOwnPropertyDescriptor(it,key){it=toIObject(it);key=toPrimitive(key,true);if(it===ObjectProto&&has(AllSymbols,key)&&!has(OPSymbols,key))return;var D=gOPD(it,key);if(D&&has(AllSymbols,key)&&!(has(it,HIDDEN)&&it[HIDDEN][key]))D.enumerable=true;return D};var $getOwnPropertyNames=function getOwnPropertyNames(it){var names=gOPN(toIObject(it)),result=[],i=0,key;while(names.length>i){if(!has(AllSymbols,key=names[i++])&&key!=HIDDEN&&key!=META)result.push(key)}return result};var $getOwnPropertySymbols=function getOwnPropertySymbols(it){var IS_OP=it===ObjectProto,names=gOPN(IS_OP?OPSymbols:toIObject(it)),result=[],i=0,key;while(names.length>i){if(has(AllSymbols,key=names[i++])&&(IS_OP?has(ObjectProto,key):true))result.push(AllSymbols[key])}return result};if(!USE_NATIVE){$Symbol=function Symbol(){if(this instanceof $Symbol)throw TypeError("Symbol is not a constructor!");var tag=uid(arguments.length>0?arguments[0]:undefined);var $set=function(value){if(this===ObjectProto)$set.call(OPSymbols,value);if(has(this,HIDDEN)&&has(this[HIDDEN],tag))this[HIDDEN][tag]=false;setSymbolDesc(this,tag,createDesc(1,value))};if(DESCRIPTORS&&setter)setSymbolDesc(ObjectProto,tag,{configurable:true,set:$set});return wrap(tag)};redefine($Symbol[PROTOTYPE],"toString",function toString(){return this._k});$GOPD.f=$getOwnPropertyDescriptor;$DP.f=$defineProperty;_dereq_("./_object-gopn").f=gOPNExt.f=$getOwnPropertyNames;_dereq_("./_object-pie").f=$propertyIsEnumerable;_dereq_("./_object-gops").f=$getOwnPropertySymbols;if(DESCRIPTORS&&!_dereq_("./_library")){redefine(ObjectProto,"propertyIsEnumerable",$propertyIsEnumerable,true)}wksExt.f=function(name){return wrap(wks(name))}}$export($export.G+$export.W+$export.F*!USE_NATIVE,{Symbol:$Symbol});for(var symbols="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),i=0;symbols.length>i;)wks(symbols[i++]);for(var symbols=$keys(wks.store),i=0;symbols.length>i;)wksDefine(symbols[i++]);$export($export.S+$export.F*!USE_NATIVE,"Symbol",{for:function(key){return has(SymbolRegistry,key+="")?SymbolRegistry[key]:SymbolRegistry[key]=$Symbol(key)},keyFor:function keyFor(key){if(isSymbol(key))return keyOf(SymbolRegistry,key);throw TypeError(key+" is not a symbol!")},useSetter:function(){setter=true},useSimple:function(){setter=false}});$export($export.S+$export.F*!USE_NATIVE,"Object",{create:$create,defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor,getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols});$JSON&&$export($export.S+$export.F*(!USE_NATIVE||$fails(function(){var S=$Symbol();return _stringify([S])!="[null]"||_stringify({a:S})!="{}"||_stringify(Object(S))!="{}"})),"JSON",{stringify:function stringify(it){if(it===undefined||isSymbol(it))return;var args=[it],i=1,replacer,$replacer;while(arguments.length>i)args.push(arguments[i++]);replacer=args[1];if(typeof replacer=="function")$replacer=replacer;if($replacer||!isArray(replacer))replacer=function(key,value){if($replacer)value=$replacer.call(this,key,value);if(!isSymbol(value))return value};args[1]=replacer;return _stringify.apply($JSON,args)}});$Symbol[PROTOTYPE][TO_PRIMITIVE]||_dereq_("./_hide")($Symbol[PROTOTYPE],TO_PRIMITIVE,$Symbol[PROTOTYPE].valueOf);setToStringTag($Symbol,"Symbol");setToStringTag(Math,"Math",true);setToStringTag(global.JSON,"JSON",true)},{"./_an-object":51,"./_descriptors":58,"./_enum-keys":61,"./_export":62,"./_fails":63,"./_global":65,"./_has":66,"./_hide":67,"./_is-array":73,"./_keyof":81,"./_library":82,"./_meta":83,"./_object-create":86,"./_object-dp":87,"./_object-gopd":89,"./_object-gopn":91,"./_object-gopn-ext":90,"./_object-gops":92,"./_object-keys":95,"./_object-pie":96,"./_property-desc":97,"./_redefine":99,"./_set-to-string-tag":102,"./_shared":104,"./_to-iobject":110,"./_to-primitive":113,"./_uid":114,"./_wks":117,"./_wks-define":115,"./_wks-ext":116}],128:[function(_dereq_,module,exports){_dereq_("./_wks-define")("asyncIterator")},{"./_wks-define":115}],129:[function(_dereq_,module,exports){_dereq_("./_wks-define")("observable")},{"./_wks-define":115}],130:[function(_dereq_,module,exports){_dereq_("./es6.array.iterator");var global=_dereq_("./_global"),hide=_dereq_("./_hide"),Iterators=_dereq_("./_iterators"),TO_STRING_TAG=_dereq_("./_wks")("toStringTag");for(var collections=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],i=0;i<5;i++){var NAME=collections[i],Collection=global[NAME],proto=Collection&&Collection.prototype;if(proto&&!proto[TO_STRING_TAG])hide(proto,TO_STRING_TAG,NAME);Iterators[NAME]=Iterators.Array}},{"./_global":65,"./_hide":67,"./_iterators":80,"./_wks":117,"./es6.array.iterator":119}],131:[function(_dereq_,module,exports){(function(process){exports=module.exports=_dereq_("./debug");exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function useColors(){if(typeof window!=="undefined"&&window.process&&window.process.type==="renderer"){return true}return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}exports.formatters.j=function(v){try{return JSON.stringify(v)}catch(err){return"[UnexpectedJSONParseError]: "+err.message}};function formatArgs(args){var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return;var c="color: "+this.color;args.splice(1,0,c,"color: inherit");var index=0;var lastC=0;args[0].replace(/%[a-zA-Z%]/g,function(match){if("%%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c)}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){exports.storage.removeItem("debug")}else{exports.storage.debug=namespaces}}catch(e){}}function load(){var r;try{r=exports.storage.debug}catch(e){}if(!r&&typeof process!=="undefined"&&"env"in process){r=process.env.DEBUG}return r}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}}).call(this,_dereq_("_process"))},{"./debug":132,_process:136}],132:[function(_dereq_,module,exports){exports=module.exports=createDebug.debug=createDebug["default"]=createDebug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=_dereq_("ms");exports.names=[];exports.skips=[];exports.formatters={};var prevTime;function selectColor(namespace){var hash=0,i;for(i in namespace){hash=(hash<<5)-hash+namespace.charCodeAt(i);hash|=0}return exports.colors[Math.abs(hash)%exports.colors.length]}function createDebug(namespace){function debug(){if(!debug.enabled)return;var self=debug;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i]}args[0]=exports.coerce(args[0]);if("string"!==typeof args[0]){args.unshift("%O")}var index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,function(match,format){if(match==="%%")return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});exports.formatArgs.call(self,args);var logFn=debug.log||exports.log||console.log.bind(console);logFn.apply(self,args)}debug.namespace=namespace;debug.enabled=exports.enabled(namespace);debug.useColors=exports.useColors();debug.color=selectColor(namespace);if("function"===typeof exports.init){exports.init(debug)}return debug}function enable(namespaces){exports.save(namespaces);exports.names=[];exports.skips=[];var split=(typeof namespaces==="string"?namespaces:"").split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}else{exports.names.push(new RegExp("^"+namespaces+"$"))}}}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true}}return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},{ms:135}],133:[function(_dereq_,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _get=function get(_x2,_x3,_x4){var _again=true;_function:while(_again){var object=_x2,property=_x3,receiver=_x4;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x2=parent;_x3=property;_x4=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ExtendableError=function(_Error){_inherits(ExtendableError,_Error);function ExtendableError(){var message=arguments.length<=0||arguments[0]===undefined?"":arguments[0];_classCallCheck(this,ExtendableError);_get(Object.getPrototypeOf(ExtendableError.prototype),"constructor",this).call(this,message);Object.defineProperty(this,"message",{enumerable:false,value:message,writable:true});Object.defineProperty(this,"name",{enumerable:false,value:this.constructor.name,writable:true});if(Error.hasOwnProperty("captureStackTrace")){Error.captureStackTrace(this,this.constructor);return}Object.defineProperty(this,"stack",{enumerable:false,value:new Error(message).stack,writable:true})}return ExtendableError}(Error);exports["default"]=ExtendableError;module.exports=exports["default"]},{}],134:[function(_dereq_,module,exports){(function(process,global){(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory():typeof define==="function"&&define.amd?define(factory):global.ES6Promise=factory()})(this,function(){"use strict";function objectOrFunction(x){return typeof x==="function"||typeof x==="object"&&x!==null}function isFunction(x){return typeof x==="function"}var _isArray=undefined;if(!Array.isArray){_isArray=function(x){return Object.prototype.toString.call(x)==="[object Array]"}}else{_isArray=Array.isArray}var isArray=_isArray;var len=0;var vertxNext=undefined;var customSchedulerFn=undefined;var asap=function asap(callback,arg){queue[len]=callback;queue[len+1]=arg;len+=2;if(len===2){if(customSchedulerFn){customSchedulerFn(flush)}else{scheduleFlush()}}};function setScheduler(scheduleFn){customSchedulerFn=scheduleFn}function setAsap(asapFn){asap=asapFn}var browserWindow=typeof window!=="undefined"?window:undefined;var browserGlobal=browserWindow||{};var BrowserMutationObserver=browserGlobal.MutationObserver||browserGlobal.WebKitMutationObserver;var isNode=typeof self==="undefined"&&typeof process!=="undefined"&&{}.toString.call(process)==="[object process]";var isWorker=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function useNextTick(){return function(){return process.nextTick(flush)}}function useVertxTimer(){return function(){vertxNext(flush)}}function useMutationObserver(){var iterations=0;var observer=new BrowserMutationObserver(flush);var node=document.createTextNode("");observer.observe(node,{characterData:true});return function(){node.data=iterations=++iterations%2}}function useMessageChannel(){var channel=new MessageChannel;channel.port1.onmessage=flush;return function(){return channel.port2.postMessage(0)}}function useSetTimeout(){var globalSetTimeout=setTimeout;return function(){return globalSetTimeout(flush,1)}}var queue=new Array(1e3);function flush(){for(var i=0;i<len;i+=2){var callback=queue[i];var arg=queue[i+1];callback(arg);queue[i]=undefined;queue[i+1]=undefined}len=0}function attemptVertx(){try{var r=_dereq_;var vertx=r("vertx");vertxNext=vertx.runOnLoop||vertx.runOnContext;return useVertxTimer()}catch(e){return useSetTimeout()}}var scheduleFlush=undefined;if(isNode){scheduleFlush=useNextTick()}else if(BrowserMutationObserver){scheduleFlush=useMutationObserver()}else if(isWorker){scheduleFlush=useMessageChannel()}else if(browserWindow===undefined&&typeof _dereq_==="function"){scheduleFlush=attemptVertx()}else{scheduleFlush=useSetTimeout()}function then(onFulfillment,onRejection){var _arguments=arguments;var parent=this;var child=new this.constructor(noop);if(child[PROMISE_ID]===undefined){makePromise(child)}var _state=parent._state;if(_state){(function(){var callback=_arguments[_state-1];asap(function(){return invokeCallback(_state,child,callback,parent._result)})})()}else{subscribe(parent,child,onFulfillment,onRejection)}return child}function resolve(object){var Constructor=this;if(object&&typeof object==="object"&&object.constructor===Constructor){return object}var promise=new Constructor(noop);_resolve(promise,object);return promise}var PROMISE_ID=Math.random().toString(36).substring(16);function noop(){}var PENDING=void 0;var FULFILLED=1;var REJECTED=2;var GET_THEN_ERROR=new ErrorObject;function selfFulfillment(){return new TypeError("You cannot resolve a promise with itself")}function cannotReturnOwn(){return new TypeError("A promises callback cannot return that same promise.")}function getThen(promise){try{return promise.then}catch(error){GET_THEN_ERROR.error=error;return GET_THEN_ERROR}}function tryThen(then,value,fulfillmentHandler,rejectionHandler){try{then.call(value,fulfillmentHandler,rejectionHandler)}catch(e){return e}}function handleForeignThenable(promise,thenable,then){asap(function(promise){var sealed=false;var error=tryThen(then,thenable,function(value){if(sealed){return}sealed=true;if(thenable!==value){_resolve(promise,value)}else{fulfill(promise,value)}},function(reason){if(sealed){return}sealed=true;_reject(promise,reason)},"Settle: "+(promise._label||" unknown promise"));if(!sealed&&error){sealed=true;_reject(promise,error)}},promise)}function handleOwnThenable(promise,thenable){if(thenable._state===FULFILLED){fulfill(promise,thenable._result)}else if(thenable._state===REJECTED){_reject(promise,thenable._result)}else{subscribe(thenable,undefined,function(value){return _resolve(promise,value)},function(reason){return _reject(promise,reason)})}}function handleMaybeThenable(promise,maybeThenable,then$$){if(maybeThenable.constructor===promise.constructor&&then$$===then&&maybeThenable.constructor.resolve===resolve){handleOwnThenable(promise,maybeThenable)}else{if(then$$===GET_THEN_ERROR){_reject(promise,GET_THEN_ERROR.error)}else if(then$$===undefined){fulfill(promise,maybeThenable)}else if(isFunction(then$$)){handleForeignThenable(promise,maybeThenable,then$$)}else{fulfill(promise,maybeThenable)}}}function _resolve(promise,value){if(promise===value){_reject(promise,selfFulfillment())}else if(objectOrFunction(value)){handleMaybeThenable(promise,value,getThen(value))}else{fulfill(promise,value)}}function publishRejection(promise){if(promise._onerror){promise._onerror(promise._result)}publish(promise)}function fulfill(promise,value){if(promise._state!==PENDING){return}promise._result=value;promise._state=FULFILLED;if(promise._subscribers.length!==0){asap(publish,promise)}}function _reject(promise,reason){if(promise._state!==PENDING){return}promise._state=REJECTED;promise._result=reason;asap(publishRejection,promise)}function subscribe(parent,child,onFulfillment,onRejection){var _subscribers=parent._subscribers;var length=_subscribers.length;parent._onerror=null;_subscribers[length]=child;_subscribers[length+FULFILLED]=onFulfillment;_subscribers[length+REJECTED]=onRejection;if(length===0&&parent._state){asap(publish,parent)}}function publish(promise){var subscribers=promise._subscribers;var settled=promise._state;if(subscribers.length===0){return}var child=undefined,callback=undefined,detail=promise._result;for(var i=0;i<subscribers.length;i+=3){child=subscribers[i];callback=subscribers[i+settled];if(child){invokeCallback(settled,child,callback,detail)}else{callback(detail)}}promise._subscribers.length=0}function ErrorObject(){this.error=null}var TRY_CATCH_ERROR=new ErrorObject;function tryCatch(callback,detail){try{return callback(detail)}catch(e){TRY_CATCH_ERROR.error=e;return TRY_CATCH_ERROR}}function invokeCallback(settled,promise,callback,detail){var hasCallback=isFunction(callback),value=undefined,error=undefined,succeeded=undefined,failed=undefined;if(hasCallback){value=tryCatch(callback,detail);if(value===TRY_CATCH_ERROR){failed=true;error=value.error;value=null}else{succeeded=true}if(promise===value){_reject(promise,cannotReturnOwn());return}}else{value=detail;succeeded=true}if(promise._state!==PENDING){}else if(hasCallback&&succeeded){_resolve(promise,value)}else if(failed){_reject(promise,error)}else if(settled===FULFILLED){fulfill(promise,value)}else if(settled===REJECTED){_reject(promise,value)}}function initializePromise(promise,resolver){try{resolver(function resolvePromise(value){_resolve(promise,value)},function rejectPromise(reason){_reject(promise,reason)})}catch(e){_reject(promise,e)}}var id=0;function nextId(){return id++}function makePromise(promise){promise[PROMISE_ID]=id++;promise._state=undefined;promise._result=undefined;promise._subscribers=[]}function Enumerator(Constructor,input){this._instanceConstructor=Constructor;this.promise=new Constructor(noop);if(!this.promise[PROMISE_ID]){makePromise(this.promise)}if(isArray(input)){this._input=input;this.length=input.length;this._remaining=input.length;this._result=new Array(this.length);if(this.length===0){fulfill(this.promise,this._result)}else{this.length=this.length||0;this._enumerate();if(this._remaining===0){fulfill(this.promise,this._result)}}}else{_reject(this.promise,validationError())}}function validationError(){return new Error("Array Methods must be provided an Array")}Enumerator.prototype._enumerate=function(){var length=this.length;var _input=this._input;for(var i=0;this._state===PENDING&&i<length;i++){this._eachEntry(_input[i],i)}};Enumerator.prototype._eachEntry=function(entry,i){var c=this._instanceConstructor;var resolve$$=c.resolve;if(resolve$$===resolve){var _then=getThen(entry);if(_then===then&&entry._state!==PENDING){this._settledAt(entry._state,i,entry._result)}else if(typeof _then!=="function"){this._remaining--;this._result[i]=entry}else if(c===Promise){var promise=new c(noop);handleMaybeThenable(promise,entry,_then);this._willSettleAt(promise,i)}else{this._willSettleAt(new c(function(resolve$$){return resolve$$(entry)}),i)}}else{this._willSettleAt(resolve$$(entry),i)}};Enumerator.prototype._settledAt=function(state,i,value){var promise=this.promise;if(promise._state===PENDING){this._remaining--;if(state===REJECTED){_reject(promise,value)}else{this._result[i]=value}}if(this._remaining===0){fulfill(promise,this._result)}};Enumerator.prototype._willSettleAt=function(promise,i){var enumerator=this;subscribe(promise,undefined,function(value){return enumerator._settledAt(FULFILLED,i,value)},function(reason){return enumerator._settledAt(REJECTED,i,reason)})};function all(entries){return new Enumerator(this,entries).promise}function race(entries){var Constructor=this;if(!isArray(entries)){return new Constructor(function(_,reject){return reject(new TypeError("You must pass an array to race."))})}else{return new Constructor(function(resolve,reject){var length=entries.length;for(var i=0;i<length;i++){Constructor.resolve(entries[i]).then(resolve,reject)}})}}function reject(reason){var Constructor=this;var promise=new Constructor(noop);_reject(promise,reason);return promise}function needsResolver(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function needsNew(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function Promise(resolver){this[PROMISE_ID]=nextId();this._result=this._state=undefined;this._subscribers=[];if(noop!==resolver){typeof resolver!=="function"&&needsResolver();this instanceof Promise?initializePromise(this,resolver):needsNew()}}Promise.all=all;Promise.race=race;Promise.resolve=resolve;Promise.reject=reject;Promise._setScheduler=setScheduler;Promise._setAsap=setAsap;Promise._asap=asap;Promise.prototype={constructor:Promise,then:then,catch:function _catch(onRejection){return this.then(null,onRejection)}};function polyfill(){var local=undefined;if(typeof global!=="undefined"){local=global}else if(typeof self!=="undefined"){local=self}else{try{local=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}}var P=local.Promise;if(P){var promiseToString=null;try{promiseToString=Object.prototype.toString.call(P.resolve())}catch(e){}if(promiseToString==="[object Promise]"&&!P.cast){return}}local.Promise=Promise}polyfill();Promise.polyfill=polyfill;Promise.Promise=Promise;return Promise})}).call(this,_dereq_("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{_process:136}],135:[function(_dereq_,module,exports){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};var type=typeof val;if(type==="string"&&val.length>0){return parse(val)}else if(type==="number"&&isNaN(val)===false){return options.long?fmtLong(val):fmtShort(val)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(val))};function parse(str){str=String(str);if(str.length>100){return}var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match){return}var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return undefined}}function fmtShort(ms){if(ms>=d){return Math.round(ms/d)+"d"}if(ms>=h){return Math.round(ms/h)+"h"}if(ms>=m){return Math.round(ms/m)+"m"}if(ms>=s){return Math.round(ms/s)+"s"}return ms+"ms"}function fmtLong(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n){return}if(ms<n*1.5){return Math.floor(ms/n)+" "+name}return Math.ceil(ms/n)+" "+name+"s"}},{}],136:[function(_dereq_,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],137:[function(_dereq_,module,exports){(function(global){var g=typeof global==="object"?global:typeof window==="object"?window:typeof self==="object"?self:this;var hadRuntime=g.regeneratorRuntime&&Object.getOwnPropertyNames(g).indexOf("regeneratorRuntime")>=0;var oldRuntime=hadRuntime&&g.regeneratorRuntime;g.regeneratorRuntime=undefined;module.exports=_dereq_("./runtime");if(hadRuntime){g.regeneratorRuntime=oldRuntime}else{try{delete g.regeneratorRuntime}catch(e){g.regeneratorRuntime=undefined}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./runtime":138}],138:[function(_dereq_,module,exports){(function(global){!function(global){"use strict";var Op=Object.prototype;var hasOwn=Op.hasOwnProperty;var undefined;var $Symbol=typeof Symbol==="function"?Symbol:{};var iteratorSymbol=$Symbol.iterator||"@@iterator";var asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator";var toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";var inModule=typeof module==="object";var runtime=global.regeneratorRuntime;if(runtime){if(inModule){module.exports=runtime}return}runtime=global.regeneratorRuntime=inModule?module.exports:{};function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator;var generator=Object.create(protoGenerator.prototype);var context=new Context(tryLocsList||[]);generator._invoke=makeInvokeMethod(innerFn,self,context);return generator}runtime.wrap=wrap;function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}var GenStateSuspendedStart="suspendedStart";var GenStateSuspendedYield="suspendedYield";var GenStateExecuting="executing";var GenStateCompleted="completed";var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};IteratorPrototype[iteratorSymbol]=function(){return this};var getProto=Object.getPrototypeOf;var NativeIteratorPrototype=getProto&&getProto(getProto(values([])));if(NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)){IteratorPrototype=NativeIteratorPrototype}var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);GeneratorFunction.prototype=Gp.constructor=GeneratorFunctionPrototype;GeneratorFunctionPrototype.constructor=GeneratorFunction;GeneratorFunctionPrototype[toStringTagSymbol]=GeneratorFunction.displayName="GeneratorFunction";function defineIteratorMethods(prototype){["next","throw","return"].forEach(function(method){prototype[method]=function(arg){return this._invoke(method,arg)}})}runtime.isGeneratorFunction=function(genFun){var ctor=typeof genFun==="function"&&genFun.constructor;return ctor?ctor===GeneratorFunction||(ctor.displayName||ctor.name)==="GeneratorFunction":false};runtime.mark=function(genFun){if(Object.setPrototypeOf){Object.setPrototypeOf(genFun,GeneratorFunctionPrototype)}else{genFun.__proto__=GeneratorFunctionPrototype;if(!(toStringTagSymbol in genFun)){genFun[toStringTagSymbol]="GeneratorFunction"}}genFun.prototype=Object.create(Gp);return genFun};runtime.awrap=function(arg){return{__await:arg}};function AsyncIterator(generator){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if(record.type==="throw"){reject(record.arg)}else{var result=record.arg;var value=result.value;if(value&&typeof value==="object"&&hasOwn.call(value,"__await")){return Promise.resolve(value.__await).then(function(value){invoke("next",value,resolve,reject)},function(err){invoke("throw",err,resolve,reject)})}return Promise.resolve(value).then(function(unwrapped){result.value=unwrapped;resolve(result)},reject)}}if(typeof global.process==="object"&&global.process.domain){invoke=global.process.domain.bind(invoke)}var previousPromise;function enqueue(method,arg){function callInvokeWithMethodAndArg(){return new Promise(function(resolve,reject){invoke(method,arg,resolve,reject)})}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}this._invoke=enqueue}defineIteratorMethods(AsyncIterator.prototype);AsyncIterator.prototype[asyncIteratorSymbol]=function(){return this};runtime.AsyncIterator=AsyncIterator;runtime.async=function(innerFn,outerFn,self,tryLocsList){var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList));return runtime.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next()})};function makeInvokeMethod(innerFn,self,context){var state=GenStateSuspendedStart;return function invoke(method,arg){if(state===GenStateExecuting){throw new Error("Generator is already running")}if(state===GenStateCompleted){if(method==="throw"){throw arg}return doneResult()}context.method=method;context.arg=arg;while(true){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if(context.method==="next"){context.sent=context._sent=context.arg}else if(context.method==="throw"){if(state===GenStateSuspendedStart){state=GenStateCompleted;throw context.arg}context.dispatchException(context.arg)}else if(context.method==="return"){context.abrupt("return",context.arg)}state=GenStateExecuting;var record=tryCatch(innerFn,self,context);if(record.type==="normal"){state=context.done?GenStateCompleted:GenStateSuspendedYield;if(record.arg===ContinueSentinel){continue}return{value:record.arg,done:context.done}}else if(record.type==="throw"){state=GenStateCompleted;context.method="throw";context.arg=record.arg}}}}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(method===undefined){context.delegate=null;if(context.method==="throw"){if(delegate.iterator.return){context.method="return";context.arg=undefined;maybeInvokeDelegate(delegate,context);if(context.method==="throw"){return ContinueSentinel}}context.method="throw";context.arg=new TypeError("The iterator does not provide a 'throw' method")}return ContinueSentinel}var record=tryCatch(method,delegate.iterator,context.arg);if(record.type==="throw"){context.method="throw";context.arg=record.arg;context.delegate=null;return ContinueSentinel}var info=record.arg;if(!info){context.method="throw";context.arg=new TypeError("iterator result is not an object");context.delegate=null;return ContinueSentinel}if(info.done){context[delegate.resultName]=info.value;context.next=delegate.nextLoc;if(context.method!=="return"){context.method="next";context.arg=undefined}}else{return info}context.delegate=null;return ContinueSentinel}defineIteratorMethods(Gp);Gp[toStringTagSymbol]="Generator";Gp[iteratorSymbol]=function(){return this};Gp.toString=function(){return"[object Generator]"};function pushTryEntry(locs){var entry={tryLoc:locs[0]};if(1 in locs){entry.catchLoc=locs[1]}if(2 in locs){entry.finallyLoc=locs[2];entry.afterLoc=locs[3]}this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal";delete record.arg;entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}];tryLocsList.forEach(pushTryEntry,this);this.reset(true)}runtime.keys=function(object){var keys=[];for(var key in object){keys.push(key)}keys.reverse();return function next(){while(keys.length){var key=keys.pop();if(key in object){next.value=key;next.done=false;return next}}next.done=true;return next}};function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod){return iteratorMethod.call(iterable)}if(typeof iterable.next==="function"){return iterable}if(!isNaN(iterable.length)){var i=-1,next=function next(){while(++i<iterable.length){if(hasOwn.call(iterable,i)){next.value=iterable[i];next.done=false;return next}}next.value=undefined;next.done=true;return next};return next.next=next}}return{next:doneResult}}runtime.values=values;function doneResult(){return{value:undefined,done:true}}Context.prototype={constructor:Context,reset:function(skipTempReset){this.prev=0;this.next=0;this.sent=this._sent=undefined;this.done=false;this.delegate=null;this.method="next";this.arg=undefined;this.tryEntries.forEach(resetTryEntry);if(!skipTempReset){for(var name in this){if(name.charAt(0)==="t"&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))){this[name]=undefined}}}},stop:function(){this.done=true;var rootEntry=this.tryEntries[0];var rootRecord=rootEntry.completion;if(rootRecord.type==="throw"){throw rootRecord.arg}return this.rval},dispatchException:function(exception){if(this.done){throw exception}var context=this;function handle(loc,caught){record.type="throw";record.arg=exception;context.next=loc;if(caught){context.method="next";context.arg=undefined}return!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];var record=entry.completion;if(entry.tryLoc==="root"){return handle("end")}if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc");var hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc){return handle(entry.catchLoc,true)}else if(this.prev<entry.finallyLoc){return handle(entry.finallyLoc)}}else if(hasCatch){if(this.prev<entry.catchLoc){return handle(entry.catchLoc,true)}}else if(hasFinally){if(this.prev<entry.finallyLoc){return handle(entry.finallyLoc)}}else{throw new Error("try statement without catch or finally")}}}},abrupt:function(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}if(finallyEntry&&(type==="break"||type==="continue")&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc){finallyEntry=null}var record=finallyEntry?finallyEntry.completion:{};record.type=type;record.arg=arg;if(finallyEntry){this.method="next";this.next=finallyEntry.finallyLoc;return ContinueSentinel}return this.complete(record)},complete:function(record,afterLoc){if(record.type==="throw"){throw record.arg}if(record.type==="break"||record.type==="continue"){this.next=record.arg}else if(record.type==="return"){this.rval=this.arg=record.arg;this.method="return";this.next="end"}else if(record.type==="normal"&&afterLoc){this.next=afterLoc}return ContinueSentinel},finish:function(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc){this.complete(entry.completion,entry.afterLoc);resetTryEntry(entry);return ContinueSentinel}}},catch:function(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if(record.type==="throw"){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function(iterable,resultName,nextLoc){this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc};if(this.method==="next"){this.arg=undefined}return ContinueSentinel}}}(typeof global==="object"?global:typeof window==="object"?window:typeof self==="object"?self:this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],139:[function(_dereq_,module,exports){module.exports=_dereq_("./lib/retry")},{"./lib/retry":140}],140:[function(_dereq_,module,exports){var RetryOperation=_dereq_("./retry_operation");exports.operation=function(options){var timeouts=exports.timeouts(options);return new RetryOperation(timeouts,{forever:options&&options.forever,unref:options&&options.unref})};exports.timeouts=function(options){if(options instanceof Array){return[].concat(options)}var opts={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:Infinity,randomize:false};for(var key in options){opts[key]=options[key]}if(opts.minTimeout>opts.maxTimeout){throw new Error("minTimeout is greater than maxTimeout")}var timeouts=[];for(var i=0;i<opts.retries;i++){timeouts.push(this.createTimeout(i,opts))}if(options&&options.forever&&!timeouts.length){timeouts.push(this.createTimeout(i,opts))}timeouts.sort(function(a,b){return a-b});return timeouts};exports.createTimeout=function(attempt,opts){var random=opts.randomize?Math.random()+1:1;var timeout=Math.round(random*opts.minTimeout*Math.pow(opts.factor,attempt));timeout=Math.min(timeout,opts.maxTimeout);return timeout};exports.wrap=function(obj,options,methods){if(options instanceof Array){methods=options;options=null}if(!methods){methods=[];for(var key in obj){if(typeof obj[key]==="function"){methods.push(key)}}}for(var i=0;i<methods.length;i++){var method=methods[i];var original=obj[method];obj[method]=function retryWrapper(){var op=exports.operation(options);var args=Array.prototype.slice.call(arguments);var callback=args.pop();args.push(function(err){if(op.retry(err)){return}if(err){arguments[0]=op.mainError()}callback.apply(this,arguments)});op.attempt(function(){original.apply(obj,args)})};obj[method].options=options}}},{"./retry_operation":141}],141:[function(_dereq_,module,exports){function RetryOperation(timeouts,options){if(typeof options==="boolean"){options={forever:options}}this._timeouts=timeouts;this._options=options||{};this._fn=null;this._errors=[];this._attempts=1;this._operationTimeout=null;this._operationTimeoutCb=null;this._timeout=null;if(this._options.forever){this._cachedTimeouts=this._timeouts.slice(0)}}module.exports=RetryOperation;RetryOperation.prototype.stop=function(){if(this._timeout){clearTimeout(this._timeout)}this._timeouts=[];this._cachedTimeouts=null};RetryOperation.prototype.retry=function(err){if(this._timeout){clearTimeout(this._timeout)}if(!err){return false}this._errors.push(err);var timeout=this._timeouts.shift();if(timeout===undefined){if(this._cachedTimeouts){this._errors.splice(this._errors.length-1,this._errors.length);this._timeouts=this._cachedTimeouts.slice(0);timeout=this._timeouts.shift()}else{return false}}var self=this;var timer=setTimeout(function(){self._attempts++;if(self._operationTimeoutCb){self._timeout=setTimeout(function(){self._operationTimeoutCb(self._attempts)},self._operationTimeout);if(this._options.unref){self._timeout.unref()}}self._fn(self._attempts)},timeout);if(this._options.unref){timer.unref()}return true};RetryOperation.prototype.attempt=function(fn,timeoutOps){this._fn=fn;if(timeoutOps){if(timeoutOps.timeout){this._operationTimeout=timeoutOps.timeout}if(timeoutOps.cb){this._operationTimeoutCb=timeoutOps.cb}}var self=this;if(this._operationTimeoutCb){this._timeout=setTimeout(function(){self._operationTimeoutCb()},self._operationTimeout)}this._fn(this._attempts)};RetryOperation.prototype.try=function(fn){console.log("Using RetryOperation.try() is deprecated");this.attempt(fn)};RetryOperation.prototype.start=function(fn){console.log("Using RetryOperation.start() is deprecated");this.attempt(fn)};RetryOperation.prototype.start=RetryOperation.prototype.try;RetryOperation.prototype.errors=function(){return this._errors};RetryOperation.prototype.attempts=function(){return this._attempts};RetryOperation.prototype.mainError=function(){if(this._errors.length===0){return null}var counts={};var mainError=null;var mainErrorCount=0;for(var i=0;i<this._errors.length;i++){var error=this._errors[i];var message=error.message;var count=(counts[message]||0)+1;counts[message]=count;if(count>=mainErrorCount){mainError=error;mainErrorCount=count}}return mainError}},{}],142:[function(_dereq_,module,exports){(function(factory){if(typeof exports==="object"){module.exports=factory()}else if(typeof define==="function"&&define.amd){define(factory)}else{var glob;try{glob=window}catch(e){glob=self}glob.SparkMD5=factory()}})(function(undefined){"use strict";var add32=function(a,b){return a+b&4294967295},hex_chr=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function cmn(q,a,b,x,s,t){a=add32(add32(a,q),add32(x,t));return add32(a<<s|a>>>32-s,b)}function ff(a,b,c,d,x,s,t){return cmn(b&c|~b&d,a,b,x,s,t)}function gg(a,b,c,d,x,s,t){return cmn(b&d|c&~d,a,b,x,s,t)}function hh(a,b,c,d,x,s,t){return cmn(b^c^d,a,b,x,s,t)}function ii(a,b,c,d,x,s,t){return cmn(c^(b|~d),a,b,x,s,t)}function md5cycle(x,k){var a=x[0],b=x[1],c=x[2],d=x[3];a=ff(a,b,c,d,k[0],7,-680876936);d=ff(d,a,b,c,k[1],12,-389564586);c=ff(c,d,a,b,k[2],17,606105819);b=ff(b,c,d,a,k[3],22,-1044525330);a=ff(a,b,c,d,k[4],7,-176418897);d=ff(d,a,b,c,k[5],12,1200080426);c=ff(c,d,a,b,k[6],17,-1473231341);b=ff(b,c,d,a,k[7],22,-45705983);a=ff(a,b,c,d,k[8],7,1770035416);d=ff(d,a,b,c,k[9],12,-1958414417);c=ff(c,d,a,b,k[10],17,-42063);b=ff(b,c,d,a,k[11],22,-1990404162);a=ff(a,b,c,d,k[12],7,1804603682);d=ff(d,a,b,c,k[13],12,-40341101);c=ff(c,d,a,b,k[14],17,-1502002290);b=ff(b,c,d,a,k[15],22,1236535329);a=gg(a,b,c,d,k[1],5,-165796510);d=gg(d,a,b,c,k[6],9,-1069501632);c=gg(c,d,a,b,k[11],14,643717713);b=gg(b,c,d,a,k[0],20,-373897302);a=gg(a,b,c,d,k[5],5,-701558691);d=gg(d,a,b,c,k[10],9,38016083);c=gg(c,d,a,b,k[15],14,-660478335);b=gg(b,c,d,a,k[4],20,-405537848);a=gg(a,b,c,d,k[9],5,568446438);d=gg(d,a,b,c,k[14],9,-1019803690);c=gg(c,d,a,b,k[3],14,-187363961);b=gg(b,c,d,a,k[8],20,1163531501);a=gg(a,b,c,d,k[13],5,-1444681467);d=gg(d,a,b,c,k[2],9,-51403784);c=gg(c,d,a,b,k[7],14,1735328473);b=gg(b,c,d,a,k[12],20,-1926607734);a=hh(a,b,c,d,k[5],4,-378558);d=hh(d,a,b,c,k[8],11,-2022574463);c=hh(c,d,a,b,k[11],16,1839030562);b=hh(b,c,d,a,k[14],23,-35309556);a=hh(a,b,c,d,k[1],4,-1530992060);d=hh(d,a,b,c,k[4],11,1272893353);c=hh(c,d,a,b,k[7],16,-155497632);b=hh(b,c,d,a,k[10],23,-1094730640);a=hh(a,b,c,d,k[13],4,681279174);d=hh(d,a,b,c,k[0],11,-358537222);c=hh(c,d,a,b,k[3],16,-722521979);b=hh(b,c,d,a,k[6],23,76029189);a=hh(a,b,c,d,k[9],4,-640364487);d=hh(d,a,b,c,k[12],11,-421815835);c=hh(c,d,a,b,k[15],16,530742520);b=hh(b,c,d,a,k[2],23,-995338651);a=ii(a,b,c,d,k[0],6,-198630844);d=ii(d,a,b,c,k[7],10,1126891415);c=ii(c,d,a,b,k[14],15,-1416354905);b=ii(b,c,d,a,k[5],21,-57434055);a=ii(a,b,c,d,k[12],6,1700485571);d=ii(d,a,b,c,k[3],10,-1894986606);c=ii(c,d,a,b,k[10],15,-1051523);b=ii(b,c,d,a,k[1],21,-2054922799);a=ii(a,b,c,d,k[8],6,1873313359);d=ii(d,a,b,c,k[15],10,-30611744);c=ii(c,d,a,b,k[6],15,-1560198380);b=ii(b,c,d,a,k[13],21,1309151649);a=ii(a,b,c,d,k[4],6,-145523070);d=ii(d,a,b,c,k[11],10,-1120210379);c=ii(c,d,a,b,k[2],15,718787259);b=ii(b,c,d,a,k[9],21,-343485551);x[0]=add32(a,x[0]);x[1]=add32(b,x[1]);x[2]=add32(c,x[2]);x[3]=add32(d,x[3])}function md5blk(s){var md5blks=[],i;for(i=0;i<64;i+=4){md5blks[i>>2]=s.charCodeAt(i)+(s.charCodeAt(i+1)<<8)+(s.charCodeAt(i+2)<<16)+(s.charCodeAt(i+3)<<24)}return md5blks}function md5blk_array(a){var md5blks=[],i;for(i=0;i<64;i+=4){md5blks[i>>2]=a[i]+(a[i+1]<<8)+(a[i+2]<<16)+(a[i+3]<<24)}return md5blks}function md51(s){var n=s.length,state=[1732584193,-271733879,-1732584194,271733878],i,length,tail,tmp,lo,hi;for(i=64;i<=n;i+=64){md5cycle(state,md5blk(s.substring(i-64,i)))}s=s.substring(i-64);length=s.length;tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<length;i+=1){tail[i>>2]|=s.charCodeAt(i)<<(i%4<<3)}tail[i>>2]|=128<<(i%4<<3);if(i>55){md5cycle(state,tail);for(i=0;i<16;i+=1){tail[i]=0}}tmp=n*8;tmp=tmp.toString(16).match(/(.*?)(.{0,8})$/);lo=parseInt(tmp[2],16);hi=parseInt(tmp[1],16)||0;tail[14]=lo;tail[15]=hi;md5cycle(state,tail);return state}function md51_array(a){var n=a.length,state=[1732584193,-271733879,-1732584194,271733878],i,length,tail,tmp,lo,hi;for(i=64;i<=n;i+=64){md5cycle(state,md5blk_array(a.subarray(i-64,i)))}a=i-64<n?a.subarray(i-64):new Uint8Array(0);length=a.length;tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<length;i+=1){tail[i>>2]|=a[i]<<(i%4<<3)}tail[i>>2]|=128<<(i%4<<3);if(i>55){md5cycle(state,tail);for(i=0;i<16;i+=1){tail[i]=0}}tmp=n*8;tmp=tmp.toString(16).match(/(.*?)(.{0,8})$/);lo=parseInt(tmp[2],16);hi=parseInt(tmp[1],16)||0;tail[14]=lo;tail[15]=hi;md5cycle(state,tail);return state}function rhex(n){var s="",j;for(j=0;j<4;j+=1){s+=hex_chr[n>>j*8+4&15]+hex_chr[n>>j*8&15]}return s}function hex(x){var i;for(i=0;i<x.length;i+=1){x[i]=rhex(x[i])}return x.join("")}if(hex(md51("hello"))!=="5d41402abc4b2a76b9719d911017c592"){add32=function(x,y){var lsw=(x&65535)+(y&65535),msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|lsw&65535}}if(typeof ArrayBuffer!=="undefined"&&!ArrayBuffer.prototype.slice){(function(){function clamp(val,length){val=val|0||0;if(val<0){return Math.max(val+length,0)}return Math.min(val,length)}ArrayBuffer.prototype.slice=function(from,to){var length=this.byteLength,begin=clamp(from,length),end=length,num,target,targetArray,sourceArray;if(to!==undefined){end=clamp(to,length)}if(begin>end){return new ArrayBuffer(0)}num=end-begin;target=new ArrayBuffer(num);targetArray=new Uint8Array(target);sourceArray=new Uint8Array(this,begin,num);targetArray.set(sourceArray);return target}})()}function toUtf8(str){if(/[\u0080-\uFFFF]/.test(str)){str=unescape(encodeURIComponent(str))}return str}function utf8Str2ArrayBuffer(str,returnUInt8Array){var length=str.length,buff=new ArrayBuffer(length),arr=new Uint8Array(buff),i;for(i=0;i<length;i+=1){arr[i]=str.charCodeAt(i)}return returnUInt8Array?arr:buff}function arrayBuffer2Utf8Str(buff){return String.fromCharCode.apply(null,new Uint8Array(buff))}function concatenateArrayBuffers(first,second,returnUInt8Array){var result=new Uint8Array(first.byteLength+second.byteLength);result.set(new Uint8Array(first));result.set(new Uint8Array(second),first.byteLength);return returnUInt8Array?result:result.buffer}function hexToBinaryString(hex){var bytes=[],length=hex.length,x;for(x=0;x<length-1;x+=2){bytes.push(parseInt(hex.substr(x,2),16))}return String.fromCharCode.apply(String,bytes)}function SparkMD5(){this.reset()}SparkMD5.prototype.append=function(str){this.appendBinary(toUtf8(str));return this};SparkMD5.prototype.appendBinary=function(contents){this._buff+=contents;this._length+=contents.length;var length=this._buff.length,i;for(i=64;i<=length;i+=64){md5cycle(this._hash,md5blk(this._buff.substring(i-64,i)))}this._buff=this._buff.substring(i-64);return this};SparkMD5.prototype.end=function(raw){var buff=this._buff,length=buff.length,i,tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ret;for(i=0;i<length;i+=1){tail[i>>2]|=buff.charCodeAt(i)<<(i%4<<3)}this._finish(tail,length);ret=hex(this._hash);if(raw){ret=hexToBinaryString(ret)}this.reset();return ret};SparkMD5.prototype.reset=function(){this._buff="";this._length=0;this._hash=[1732584193,-271733879,-1732584194,271733878];return this};SparkMD5.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}};SparkMD5.prototype.setState=function(state){this._buff=state.buff;this._length=state.length;this._hash=state.hash;return this};SparkMD5.prototype.destroy=function(){delete this._hash;delete this._buff;delete this._length};SparkMD5.prototype._finish=function(tail,length){var i=length,tmp,lo,hi;tail[i>>2]|=128<<(i%4<<3);if(i>55){md5cycle(this._hash,tail);for(i=0;i<16;i+=1){tail[i]=0}}tmp=this._length*8;tmp=tmp.toString(16).match(/(.*?)(.{0,8})$/);lo=parseInt(tmp[2],16);hi=parseInt(tmp[1],16)||0;tail[14]=lo;tail[15]=hi;md5cycle(this._hash,tail)};SparkMD5.hash=function(str,raw){return SparkMD5.hashBinary(toUtf8(str),raw)};SparkMD5.hashBinary=function(content,raw){var hash=md51(content),ret=hex(hash);return raw?hexToBinaryString(ret):ret};SparkMD5.ArrayBuffer=function(){this.reset()};SparkMD5.ArrayBuffer.prototype.append=function(arr){var buff=concatenateArrayBuffers(this._buff.buffer,arr,true),length=buff.length,i;this._length+=arr.byteLength;for(i=64;i<=length;i+=64){md5cycle(this._hash,md5blk_array(buff.subarray(i-64,i)))}this._buff=i-64<length?new Uint8Array(buff.buffer.slice(i-64)):new Uint8Array(0);return this};SparkMD5.ArrayBuffer.prototype.end=function(raw){var buff=this._buff,length=buff.length,tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i,ret;for(i=0;i<length;i+=1){tail[i>>2]|=buff[i]<<(i%4<<3)}this._finish(tail,length);ret=hex(this._hash);if(raw){ret=hexToBinaryString(ret)}this.reset();return ret};SparkMD5.ArrayBuffer.prototype.reset=function(){this._buff=new Uint8Array(0);this._length=0;this._hash=[1732584193,-271733879,-1732584194,271733878];return this};SparkMD5.ArrayBuffer.prototype.getState=function(){var state=SparkMD5.prototype.getState.call(this);state.buff=arrayBuffer2Utf8Str(state.buff);return state};SparkMD5.ArrayBuffer.prototype.setState=function(state){state.buff=utf8Str2ArrayBuffer(state.buff,true);return SparkMD5.prototype.setState.call(this,state)};SparkMD5.ArrayBuffer.prototype.destroy=SparkMD5.prototype.destroy;SparkMD5.ArrayBuffer.prototype._finish=SparkMD5.prototype._finish;SparkMD5.ArrayBuffer.hash=function(arr,raw){var hash=md51_array(new Uint8Array(arr)),ret=hex(hash);return raw?hexToBinaryString(ret):ret};return SparkMD5})},{}]},{},[7])(7)});
